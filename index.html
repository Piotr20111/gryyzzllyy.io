<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Pobierz fascynujące gry - Labirynt pełen wyzwań i Kółko i krzyżyk. Bezpieczne pobieranie gier online.">
    <title>Gry do pobrania!</title>
    
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <style>
        /* —— RESET & THEME —— */
        :root {
            --primary-orange: #ff7700;
            --primary-purple: #6b46c1;
            --primary-blue: #3498db;
            --primary-green: #28a745;
            --primary-gold: #FFD700;
            --primary-premium: #E91E63;
            --bg-dark: #0f0f1a;
            --bg-section: rgba(30, 30, 46, 0.92);
            --text-light: #ffffff;
            --shadow-glow: 0 0 20px;
            --error-color: #dc3545;
            --success-color: #28a745;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text-light);
            background-color: var(--bg-dark);
            background-image: 
                linear-gradient(135deg, rgba(50, 12, 102, 0.15) 25%, transparent 25%),
                linear-gradient(225deg, rgba(50, 12, 102, 0.15) 25%, transparent 25%),
                linear-gradient(45deg, rgba(50, 12, 102, 0.15) 25%, transparent 25%),
                linear-gradient(315deg, rgba(50, 12, 102, 0.15) 25%, #0f0f1a 25%);
            background-position: 10px 0, 10px 0, 0 0, 0 0;
            background-size: 20px 20px;
            background-attachment: fixed;
            position: relative;
            overflow-x: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Enhanced neon glow effect */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(45, 0, 128, 0.4) 0%, rgba(10, 10, 35, 0) 80%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundPulse 8s ease-in-out infinite;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* —— NEW ADVANCED ANIMATIONS —— */
        @keyframes crystalShine {
            0% {
                background-position: -200% center;
            }
            100% {
                background-position: 200% center;
            }
        }

        @keyframes premiumGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.5),
                            0 0 40px rgba(255, 215, 0, 0.3),
                            inset 0 0 20px rgba(255, 215, 0, 0.1);
            }
            50% {
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8),
                            0 0 60px rgba(255, 215, 0, 0.5),
                            inset 0 0 30px rgba(255, 215, 0, 0.2);
            }
        }

        @keyframes rainbowBorder {
            0% { border-color: #ff0000; }
            16% { border-color: #ff8800; }
            33% { border-color: #ffff00; }
            50% { border-color: #00ff00; }
            66% { border-color: #0088ff; }
            83% { border-color: #8800ff; }
            100% { border-color: #ff0000; }
        }

        @keyframes floatingParticles {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes electricPulse {
            0%, 100% {
                filter: brightness(1) contrast(1);
            }
            50% {
                filter: brightness(1.2) contrast(1.1);
            }
        }

        @keyframes holographicEffect {
            0% {
                transform: perspective(1000px) rotateY(0deg);
            }
            100% {
                transform: perspective(1000px) rotateY(360deg);
            }
        }

        @keyframes pixelGlitch {
            0%, 100% {
                transform: translate(0);
                filter: hue-rotate(0deg);
            }
            20% {
                transform: translate(-2px, 2px);
                filter: hue-rotate(90deg);
            }
            40% {
                transform: translate(-2px, -2px);
                filter: hue-rotate(180deg);
            }
            60% {
                transform: translate(2px, 2px);
                filter: hue-rotate(270deg);
            }
            80% {
                transform: translate(2px, -2px);
                filter: hue-rotate(360deg);
            }
        }

        @keyframes neonFlicker {
            0%, 100% {
                opacity: 1;
                text-shadow: 0 0 10px currentColor,
                             0 0 20px currentColor,
                             0 0 30px currentColor,
                             0 0 40px currentColor;
            }
            10%, 90% {
                opacity: 0.9;
                text-shadow: 0 0 5px currentColor,
                             0 0 10px currentColor,
                             0 0 15px currentColor,
                             0 0 20px currentColor;
            }
        }

        @keyframes matrixRain {
            0% {
                transform: translateY(-100%);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        @keyframes energyField {
            0% {
                transform: scale(0.8) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: scale(1.2) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(0.8) rotate(360deg);
                opacity: 0.3;
            }
        }

        /* —— ADVANCED ANIMATIONS (continued from previous) —— */
        @keyframes slideInFromTop {
            0% {
                transform: translateY(-100px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromLeft {
            0% {
                transform: translateX(-100px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromRight {
            0% {
                transform: translateX(100px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes glowPulse {
            0%, 100% {
                box-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.4);
            }
            50% {
                box-shadow: 0 0 30px rgba(255, 119, 0, 0.8), 0 0 40px rgba(255, 119, 0, 0.4);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes rotateHue {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink {
            50% { border-color: transparent; }
        }

        /* Luminous glow effect */
        @keyframes luminousGlow {
            0%, 100% { 
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.8),
                             0 0 10px rgba(255, 255, 255, 0.5),
                             0 0 15px rgba(255, 119, 0, 0.4),
                             0 0 20px rgba(255, 119, 0, 0.3);
            }
            50% { 
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.9),
                             0 0 20px rgba(255, 255, 255, 0.6),
                             0 0 30px rgba(255, 119, 0, 0.5),
                             0 0 40px rgba(255, 119, 0, 0.4);
            }
        }

        /* Cosmic background animation */
        @keyframes cosmicBackground {
            0% {
                background-position: 0% 0%;
            }
            50% {
                background-position: 100% 100%;
            }
            100% {
                background-position: 0% 0%;
            }
        }
        
        /* Rotating border animation */
        @keyframes rotateBorder {
            0% { border-image-source: linear-gradient(0deg, var(--primary-orange), var(--primary-purple)); }
            25% { border-image-source: linear-gradient(90deg, var(--primary-purple), var(--primary-blue)); }
            50% { border-image-source: linear-gradient(180deg, var(--primary-blue), var(--primary-green)); }
            75% { border-image-source: linear-gradient(270deg, var(--primary-green), var(--primary-orange)); }
            100% { border-image-source: linear-gradient(360deg, var(--primary-orange), var(--primary-purple)); }
        }
        
        /* Smooth close animation */
        @keyframes smoothClose {
            0% { transform: rotate(0deg) scale(1); }
            100% { transform: rotate(180deg) scale(1.1); }
        }

        /* Neon pulse animation */
        @keyframes neonPulse {
            0%, 100% {
                box-shadow: 0 0 5px rgba(255, 119, 0, 0.7),
                            0 0 10px rgba(255, 119, 0, 0.5),
                            inset 0 0 5px rgba(255, 119, 0, 0.2);
            }
            50% {
                box-shadow: 0 0 15px rgba(255, 119, 0, 0.9),
                            0 0 25px rgba(255, 119, 0, 0.7),
                            inset 0 0 10px rgba(255, 119, 0, 0.3);
            }
        }
        
        /* Element slide in stagger animation */
        @keyframes elementSlideIn {
            0% {
                transform: translateY(30px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* 3D flip animation */
        @keyframes flip3D {
            0% {
                transform: perspective(400px) rotateY(0);
            }
            100% {
                transform: perspective(400px) rotateY(180deg);
            }
        }

        /* FIXED: Subtle hover animation for sections */
        @keyframes subtleHover {
            0% { transform: translateY(0); }
            100% { transform: translateY(-5px); }
        }

        /* Modal slide in animation */
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.7) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Premium popup animation */
        @keyframes premiumPopup {
            to {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Fade in animation */
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity: 1;}
        }

        /* Spin animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Slide down animation */
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: scaleY(0) translateY(-10px);
            }
            to {
                opacity: 1;
                transform: scaleY(1) translateY(0);
            }
        }

        /* Pulse animation */
        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* Typing dots animation */
        @keyframes typingDots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        /* Title pulse animation */
        @keyframes titlePulse {
            0%, 100% {
                text-shadow: 0 0 15px rgba(255, 119, 0, 0.7), 0 0 25px rgba(255, 119, 0, 0.5);
                transform: scale(1);
            }
            50% {
                text-shadow: 0 0 20px rgba(255, 119, 0, 0.9), 0 0 35px rgba(255, 119, 0, 0.7), 0 0 50px rgba(255, 119, 0, 0.4);
                transform: scale(1.02);
            }
        }

        /* Gradient shift animation */
        @keyframes gradientShift {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }

        /* Robot pulse animation */
        @keyframes robotPulse {
            0%, 100% { 
                box-shadow: 0 8px 25px rgba(107, 70, 193, 0.4), var(--shadow-glow) rgba(147, 51, 234, 0.3);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 12px 35px rgba(107, 70, 193, 0.6), var(--shadow-glow) rgba(147, 51, 234, 0.5);
                transform: scale(1.05);
            }
        }

        /* Rotate animation */
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* —— GOOGLE SIGN-IN STYLES —— */
        .google-signin-section {
            margin: 20px 0;
            text-align: center;
        }

        #googleSignInDiv {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .manual-google-btn {
            background: #4285f4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.25);
        }

        .manual-google-btn:hover {
            background: #357ae8;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transform: translateY(-1px);
        }

        .manual-google-btn svg {
            width: 24px;
            height: 24px;
        }

        /* —— PREMIUM AVATARS STYLES —— */
        .premium-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, var(--primary-gold), #FFA500);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(255, 215, 0, 0.5);
            animation: premiumGlow 2s ease-in-out infinite;
            z-index: 10;
        }

        .avatar-option.premium {
            border: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4, #FFD700) border-box;
            background-size: 100% 100%, 400% 400%;
            animation: rainbowBorder 3s linear infinite;
            position: relative;
            overflow: visible;
        }

        .avatar-option.premium.locked {
            filter: grayscale(1) brightness(0.5);
            cursor: not-allowed;
            position: relative;
        }

        .avatar-option.premium.locked::after {
            content: '🔒';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.8));
        }

        /* Premium user status */
        .premium-user-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: linear-gradient(135deg, var(--primary-gold), #FFA500);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
            animation: premiumGlow 2s ease-in-out infinite;
        }

        /* Floating particles effect */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 215, 0, 0.8);
            border-radius: 50%;
            animation: floatingParticles 10s linear infinite;
        }

        /* —— LOGIN SYSTEM STYLES —— */
        .user-panel {
            position: absolute;
            top: 0;
            left: 30px;
            z-index: 10;
            animation: slideInFromLeft 0.8s ease-out;
        }

        .login-toggle {
            background: linear-gradient(135deg, var(--primary-purple), #9333ea);
            color: white;
            border: none;
            padding: 8px 15px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 0 0 8px 8px;
            display: flex;
            align-items: center;
            box-shadow: var(--shadow-glow) rgba(107, 70, 193, 0.4);
            border: 1px solid rgba(107, 70, 193, 0.25);
            border-top: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: float 3s ease-in-out infinite;
        }

        .login-toggle:hover {
            background: linear-gradient(135deg, #5b21b6, #7c3aed);
            box-shadow: 0 4px 25px rgba(107, 70, 193, 0.6);
            transform: translateY(-2px);
        }

        /* Login modal */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
            background: linear-gradient(135deg, rgba(15, 15, 26, 0.85), rgba(10, 10, 20, 0.95));
            backdrop-filter: blur(15px);
        }

        /* Beautiful cosmic background for auth modal */
        .auth-modal::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(107, 70, 193, 0.2) 0%, transparent 25%),
                radial-gradient(circle at 90% 80%, rgba(255, 119, 0, 0.2) 0%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(52, 152, 219, 0.1) 0%, transparent 50%);
            pointer-events: none;
            opacity: 0.8;
            animation: cosmicBackground 20s ease infinite;
            z-index: -1;
        }

        /* Add star-like dots to auth modal background */
        .auth-modal::after {
            content: '';
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            background-image: radial-gradient(white, rgba(255,255,255,0) 2px);
            background-size: 100px 100px;
            background-position: 0 0, 50px 50px;
            opacity: 0.2;
            z-index: -1;
            animation: float 6s infinite ease-in-out;
        }

        .auth-content {
            background: linear-gradient(145deg, rgba(30, 30, 46, 0.95), rgba(20, 20, 35, 0.95));
            margin: 5% auto;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.8),
                var(--shadow-glow) rgba(107, 70, 193, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(107, 70, 193, 0.3);
            position: relative;
            animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 90vh;
            overflow-y: auto;
            z-index: 1001;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h2 {
            color: var(--primary-orange);
            font-size: 28px;
            margin: 0;
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.5);
            animation: glowPulse 2s ease-in-out infinite;
        }

        .user-info {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
            animation: slideInFromTop 0.5s ease-out;
            transition: all 0.3s ease;
        }
        
        /* Fixed hover graphics */
        .user-info:hover {
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.3);
            transform: translateY(-3px);
            background: rgba(40, 167, 69, 0.15);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-orange), var(--primary-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 24px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 15px rgba(107, 70, 193, 0.5);
            transition: all 0.3s ease;
            animation: neonPulse 3s infinite;
        }
        
        /* Fixed hover graphics */
        .user-avatar:hover {
            transform: scale(1.08) rotate(5deg);
            box-shadow: 0 0 25px rgba(107, 70, 193, 0.8);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        /* Cool hover effect for avatar image */
        .user-avatar:hover img {
            filter: saturate(1.3) brightness(1.1);
        }

        .logout-btn {
            background: rgba(220, 53, 69, 0.8);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(220, 53, 69, 1);
            transform: scale(1.05);
        }

        /* Fixed: Close button - smoother animation */
        .close-auth {
            position: absolute;
            top: 15px;
            right: 20px;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            user-select: none;
            z-index: 1002;
        }

        .close-auth:hover {
            color: var(--primary-orange);
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.6);
            background: rgba(255, 119, 0, 0.1);
            animation: smoothClose 0.3s ease;
        }

        /* —— AVATAR SELECTION —— */
        .avatar-selection {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* FIXED: Avatar grid without hover scrolling issue */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(15, 15, 26, 0.6);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        /* Custom scrollbar for avatar grid */
        .avatar-grid::-webkit-scrollbar {
            width: 8px;
        }

        .avatar-grid::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        .avatar-grid::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.5), rgba(107, 70, 193, 0.5));
            border-radius: 4px;
        }

        .avatar-grid::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.7), rgba(107, 70, 193, 0.7));
        }

        .avatar-option {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .avatar-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .avatar-option:hover {
            border-color: var(--primary-orange);
            transform: scale(1.1);
            box-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.5);
            z-index: 1;
        }
        
        /* Glow effect on hover */
        .avatar-option::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: radial-gradient(circle, rgba(255, 119, 0, 0.7) 0%, rgba(255, 119, 0, 0) 70%);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 50%;
        }
        
        .avatar-option:hover::after {
            opacity: 1;
        }

        .avatar-option.selected {
            border-color: var(--primary-orange);
            box-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.7);
            transform: scale(1.05);
        }

        /* —— SETTINGS MODAL —— */
        .settings-btn {
            background: rgba(52, 152, 219, 0.8);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .settings-btn:hover {
            background: rgba(52, 152, 219, 1);
            transform: scale(1.05);
        }

        .settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
            background: linear-gradient(135deg, rgba(15, 15, 26, 0.85), rgba(10, 10, 20, 0.95));
            backdrop-filter: blur(15px);
        }

        /* Beautiful cosmic background for settings modal */
        .settings-modal::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 80% 10%, rgba(52, 152, 219, 0.2) 0%, transparent 25%),
                radial-gradient(circle at 20% 90%, rgba(40, 167, 69, 0.2) 0%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(255, 119, 0, 0.1) 0%, transparent 50%);
            pointer-events: none;
            opacity: 0.8;
            animation: cosmicBackground 20s ease infinite alternate;
            z-index: -1;
        }

        .settings-content {
            background: linear-gradient(145deg, rgba(30, 30, 46, 0.95), rgba(20, 20, 35, 0.95));
            margin: 5% auto;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.8),
                var(--shadow-glow) rgba(52, 152, 219, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(52, 152, 219, 0.3);
            position: relative;
            animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 90vh;
            overflow-y: auto;
            z-index: 1001;
        }

        .settings-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(15, 15, 26, 0.6);
            border-radius: 12px;
            border: 1px solid rgba(52, 152, 219, 0.2);
            transition: all 0.3s ease;
        }
        
        /* Fixed hover graphics */
        .settings-section:hover {
            background: rgba(15, 15, 26, 0.8);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.15);
            transform: translateY(-3px);
            border-color: rgba(52, 152, 219, 0.3);
        }

        .settings-section h3 {
            color: var(--primary-blue);
            margin-top: 0;
            font-size: 20px;
        }

        .danger-zone {
            border-color: rgba(220, 53, 69, 0.3);
            background: rgba(220, 53, 69, 0.1);
        }
        
        /* Fixed hover graphics for danger zone */
        .danger-zone:hover {
            background: rgba(220, 53, 69, 0.15);
            box-shadow: 0 0 20px rgba(220, 53, 69, 0.15);
            border-color: rgba(220, 53, 69, 0.4);
        }

        .danger-zone h3 {
            color: var(--error-color);
        }

        .delete-account-btn {
            background: linear-gradient(135deg, var(--error-color), #c82333);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .delete-account-btn:hover {
            background: linear-gradient(135deg, #c82333, #a71e2a);
            transform: scale(1.05);
        }

        /* CAPTCHA challenge for account deletion */
        .captcha-challenge {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            display: none;
        }

        .captcha-code {
            font-family: 'Courier New', monospace;
            font-size: 20px;
            letter-spacing: 3px;
            color: var(--primary-orange);
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            user-select: none;
        }

        /* —— ENHANCED DROPDOWNS —— */
        .language-dropdown, .help-dropdown {
            position: absolute;
            top: 0;
            z-index: 10;
            animation: slideInFromRight 0.8s ease-out;
        }

        .language-dropdown {
            right: 30px;
        }

        /* Help dropdown position */
        .help-dropdown {
            right: 200px;
        }

        .dropdown-btn {
            background: linear-gradient(135deg, rgba(20, 20, 35, 0.9), rgba(30, 30, 46, 0.9));
            color: var(--primary-orange);
            border: none;
            padding: 8px 15px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 0 0 8px 8px;
            display: flex;
            align-items: center;
            box-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.2);
            border: 1px solid rgba(255, 119, 0, 0.25);
            border-top: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .help-dropdown .dropdown-btn {
            color: #dc3545;
            box-shadow: var(--shadow-glow) rgba(220, 53, 69, 0.2);
            border-color: rgba(220, 53, 69, 0.25);
        }

        .dropdown-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 119, 0, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .dropdown-btn:hover::before {
            transform: translateX(100%);
        }

        .dropdown-btn:hover {
            background: linear-gradient(135deg, rgba(40, 40, 60, 0.95), rgba(50, 50, 66, 0.95));
            box-shadow: 0 4px 18px rgba(0, 0, 0, 0.5), var(--shadow-glow) rgba(255, 119, 0, 0.3);
            transform: translateY(-2px);
        }

        .dropdown-btn::after {
            content: "▼";
            font-size: 10px;
            margin-left: 8px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dropdown-btn.active::after {
            transform: rotate(180deg);
        }

        /* FIXED: Language dropdown width */
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background: linear-gradient(145deg, rgba(20, 20, 35, 0.95), rgba(30, 30, 46, 0.95));
            min-width: 160px;
            max-width: 220px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border-radius: 0 0 8px 8px;
            border: 1px solid rgba(255, 119, 0, 0.25);
            border-top: none;
            animation: slideDown 0.3s ease forwards;
            transform-origin: top;
            z-index: 9;
            backdrop-filter: blur(10px);
        }

        /* Custom scrollbar for dropdown */
        .dropdown-content::-webkit-scrollbar {
            width: 8px;
        }

        .dropdown-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        .dropdown-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(255, 119, 0, 0.5), rgba(220, 53, 69, 0.5));
            border-radius: 4px;
        }

        .dropdown-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(255, 119, 0, 0.7), rgba(220, 53, 69, 0.7));
        }

        .dropdown-option {
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            color: white;
            text-align: left;
            font-weight: bold;
            font-size: 13px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid rgba(255, 119, 0, 0.1);
            white-space: normal;
        }

        .dropdown-option:last-child {
            border-bottom: none;
        }

        .dropdown-option::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 119, 0, 0.2), transparent);
            transition: left 0.5s;
        }

        .dropdown-option:hover::before {
            left: 100%;
        }

        .dropdown-option:hover {
            background-color: rgba(255, 119, 0, 0.2);
            color: var(--primary-orange);
            transform: translateX(5px);
        }

        .dropdown-option.active {
            color: var(--primary-orange);
            background-color: rgba(255, 119, 0, 0.1);
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.4);
        }

        /* —— ENHANCED HEADER —— */
        header {
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                              url('https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            padding: 100px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
            border-bottom: 3px solid var(--primary-orange);
            position: relative;
            overflow: hidden;
            animation: slideInFromTop 1s ease-out;
        }

        header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-orange), #ff00ff, #00ffff, var(--primary-orange));
            background-size: 400% 400%;
            animation: gradientShift 5s ease infinite;
            filter: blur(2px);
            opacity: 0.95;
        }

        h1 {
            font-size: 3.8rem;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--primary-orange);
            text-shadow: 
                0 0 15px rgba(255, 119, 0, 0.7), 
                0 0 25px rgba(255, 119, 0, 0.5), 
                0 0 35px rgba(255, 119, 0, 0.3);
            animation: titlePulse 3s ease-in-out infinite;
            position: relative;
        }

        /* —— MAIN CONTENT —— */
        main {
            max-width: 1200px;
            margin: 45px auto;
            padding: 0 20px;
            animation: slideInFromLeft 0.8s ease-out 0.3s both;
        }

        /* FIXED: Better section animation */
        section {
            background: linear-gradient(145deg, var(--bg-section), rgba(25, 25, 41, 0.92));
            border-radius: 14px;
            padding: 40px;
            margin-bottom: 35px;
            box-shadow: 
                0 5px 20px rgba(0, 0, 0, 0.4), 
                var(--shadow-glow) rgba(255, 119, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 119, 0, 0.25);
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 49%, rgba(255, 119, 0, 0.03) 50%, transparent 51%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        section:hover {
            animation: subtleHover 0.4s forwards;
            box-shadow: 
                0 12px 35px rgba(0, 0, 0, 0.5), 
                var(--shadow-glow) rgba(255, 119, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        section:hover::before {
            opacity: 1;
        }

        h2 {
            color: var(--primary-orange);
            font-size: 2.2rem;
            margin-top: 0;
            display: flex;
            align-items: center;
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.4);
            animation: slideInFromLeft 0.6s ease-out;
        }

        h2::before {
            content: "🎮";
            margin-right: 15px;
            filter: drop-shadow(var(--shadow-glow) rgba(255, 119, 0, 0.5));
            animation: float 2s ease-in-out infinite;
        }

        .download-container {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .btn {
            display: inline-block;
            padding: 15px 34px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border: none;
            font-size: 17px;
            color: var(--text-light);
            cursor: pointer;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            background: linear-gradient(145deg, transparent, rgba(255, 255, 255, 0.05));
        }

        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent);
            transform: translate(-50%, -50%);
            transition: all 0.4s ease;
        }

        .btn:hover::after {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.02);
        }

        .download-btn {
            background: linear-gradient(135deg, var(--primary-orange), #ff9900);
            box-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.4);
            animation: glowPulse 3s ease-in-out infinite;
        }

        .download-btn:hover {
            background: linear-gradient(135deg, #ff9900, #ffaa00);
            box-shadow: 0 8px 30px rgba(255, 153, 0, 0.6), var(--shadow-glow) rgba(255, 153, 0, 0.3);
        }
        
        .info-btn {
            background: linear-gradient(135deg, var(--primary-blue), #2980b9);
            box-shadow: var(--shadow-glow) rgba(52, 152, 219, 0.4);
        }
        
        .info-btn:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            box-shadow: 0 8px 30px rgba(52, 152, 219, 0.6), var(--shadow-glow) rgba(52, 152, 219, 0.3);
        }
        
        .error-message {
            display: none;
            color: #ff4444;
            margin-top: 15px;
            font-size: 14px;
            text-shadow: var(--shadow-glow) rgba(255, 68, 68, 0.4);
            flex-basis: 100%;
            animation: shake 0.5s ease-in-out;
        }

        /* —— ENHANCED AI CHATBOT —— */
        .ai-chatbot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            animation: float 3s ease-in-out infinite;
        }

        .chatbot-toggle {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-purple), #9333ea);
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 8px 25px rgba(107, 70, 193, 0.4), 
                var(--shadow-glow) rgba(147, 51, 234, 0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: robotPulse 4s infinite;
            position: relative;
            overflow: hidden;
        }

        .chatbot-toggle::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            transform: rotate(45deg);
            animation: rotate 3s linear infinite;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(107, 70, 193, 0.6), var(--shadow-glow) rgba(147, 51, 234, 0.5);
        }

        .robot-icon {
            font-size: 32px;
            color: white;
            text-shadow: var(--shadow-glow) rgba(255, 255, 255, 0.5);
            z-index: 1;
            position: relative;
        }

        .chatbot-container {
            position: absolute;
            bottom: 90px;
            right: 0;
            width: 420px;
            height: 650px;
            background: linear-gradient(145deg, var(--bg-section), rgba(25, 25, 41, 0.97));
            border-radius: 20px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5), 
                var(--shadow-glow) rgba(107, 70, 193, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(107, 70, 193, 0.4);
            display: none;
            flex-direction: column;
            overflow: hidden;
            backdrop-filter: blur(15px);
            animation: modalSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 999;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary-purple), #9333ea);
            padding: 20px;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }

        .chatbot-header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .chatbot-header:hover::before {
            transform: translateX(100%);
        }

        .chatbot-title {
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1;
            position: relative;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            position: relative;
        }

        .chatbot-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
            animation: smoothClose 0.3s ease;
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: linear-gradient(145deg, rgba(15, 15, 26, 0.8), rgba(20, 20, 31, 0.8));
        }

        .chatbot-welcome {
            text-align: center;
            color: #9333ea;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.1), rgba(107, 70, 193, 0.1));
            border-radius: 15px;
            border: 1px solid rgba(147, 51, 234, 0.3);
            animation: scaleIn 0.5s ease-out;
        }

        .chatbot-questions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .question-btn {
            background: linear-gradient(145deg, rgba(107, 70, 193, 0.2), rgba(147, 51, 234, 0.2));
            border: 1px solid rgba(107, 70, 193, 0.4);
            color: white;
            padding: 12px 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            font-size: 12px;
            line-height: 1.3;
            position: relative;
            overflow: hidden;
        }

        .question-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(107, 70, 193, 0.3), transparent);
            transition: left 0.5s;
        }

        .question-btn:hover::before {
            left: 100%;
        }

        .question-btn:hover {
            background: linear-gradient(145deg, rgba(107, 70, 193, 0.4), rgba(147, 51, 234, 0.4));
            border-color: rgba(107, 70, 193, 0.6);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 5px 15px rgba(107, 70, 193, 0.3);
        }

        .ai-response {
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.2), rgba(107, 70, 193, 0.2));
            border-left: 3px solid #9333ea;
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            color: white;
            line-height: 1.5;
            animation: slideInFromRight 0.5s ease;
            font-size: 14px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .ai-typing {
            display: none;
            background: linear-gradient(145deg, rgba(147, 51, 234, 0.1), rgba(107, 70, 193, 0.1));
            border-left: 3px solid #9333ea;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 12px;
            color: #9333ea;
            font-style: italic;
            animation: pulse 1.5s ease-in-out infinite;
        }

        .typing-dots {
            display: inline-block;
        }

        .typing-dots::after {
            content: '';
            animation: typingDots 1.5s infinite;
        }

        .chatbot-footer {
            padding: 15px 20px;
            background: linear-gradient(145deg, rgba(20, 20, 35, 0.9), rgba(25, 25, 40, 0.9));
            border-top: 1px solid rgba(107, 70, 193, 0.3);
            text-align: center;
            font-size: 12px;
            color: #9333ea;
        }

        /* Login required message for AI */
        .ai-login-required {
            text-align: center;
            color: #ff6b6b;
            padding: 20px;
            background: linear-gradient(145deg, rgba(220, 53, 69, 0.1), rgba(200, 40, 60, 0.1));
            border-radius: 15px;
            border: 1px solid rgba(220, 53, 69, 0.3);
            animation: scaleIn 0.5s ease-out;
        }

        /* Enhanced scrollbar */
        .chatbot-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chatbot-messages::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        .chatbot-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.5), rgba(107, 70, 193, 0.5));
            border-radius: 4px;
        }

        .chatbot-messages::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.7), rgba(107, 70, 193, 0.7));
        }

        /* —— MODAL STYLES —— */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow: auto;
            animation: fadeIn 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .modal-content {
            background: linear-gradient(145deg, var(--bg-section), rgba(25, 25, 41, 0.97));
            margin: 50px auto;
            padding: 40px;
            border-radius: 20px;
            max-width: 800px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.7), 
                var(--shadow-glow) rgba(255, 119, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 119, 0, 0.35);
            position: relative;
            animation: modalSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 1001;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            color: var(--text-light);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-modal:hover {
            color: var(--primary-orange);
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.6);
            background: rgba(255, 119, 0, 0.1);
            animation: smoothClose 0.3s ease;
        }
        
        .modal h3 {
            color: var(--primary-orange);
            font-size: 28px;
            margin-top: 0;
            margin-bottom: 25px;
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.4);
            animation: slideInFromLeft 0.5s ease-out;
        }

        .download-steps {
            background: linear-gradient(145deg, rgba(20, 20, 35, 0.75), rgba(25, 25, 40, 0.75));
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary-orange);
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.4);
            animation: slideInFromRight 0.5s ease-out 0.2s both;
        }
        
        .download-steps li {
            margin-bottom: 15px;
            line-height: 1.7;
            transition: all 0.3s ease;
        }

        .download-steps li:hover {
            transform: translateX(10px);
            color: var(--primary-orange);
        }
        
        .download-steps li:last-child {
            margin-bottom: 0;
        }
        
        .step-highlight {
            color: #ff9900;
            font-weight: bold;
            text-shadow: var(--shadow-glow) rgba(255, 153, 0, 0.4);
        }
        
        .warning-box {
            background: linear-gradient(145deg, rgba(220, 53, 69, 0.2), rgba(200, 40, 60, 0.2));
            border-left: 5px solid #dc3545;
            padding: 25px;
            margin-top: 30px;
            border-radius: 8px;
            box-shadow: var(--shadow-glow) rgba(220, 53, 69, 0.25);
            animation: slideInFromLeft 0.5s ease-out 0.4s both;
        }
        
        .info-img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .info-img:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            filter: brightness(1.1);
        }

        .security-features {
            background: linear-gradient(145deg, rgba(40, 167, 69, 0.1), rgba(35, 150, 60, 0.1));
            border-left: 5px solid #28a745;
            padding: 25px;
            margin: 20px 0;
            border-radius: 12px;
            box-shadow: var(--shadow-glow) rgba(40, 167, 69, 0.2);
            animation: slideInFromLeft 0.5s ease-out 0.3s both;
            transition: all 0.3s ease;
        }
        
        .security-features:hover {
            background: linear-gradient(145deg, rgba(40, 167, 69, 0.15), rgba(35, 150, 60, 0.15));
            box-shadow: var(--shadow-glow) rgba(40, 167, 69, 0.3);
            transform: translateY(-3px);
        }

        .security-item {
            display: flex;
            align-items: center;
            margin: 12px 0;
            color: var(--text-light);
            transition: all 0.3s ease;
            animation: elementSlideIn 0.4s ease forwards;
        }
        
        .security-features .security-item:nth-child(2) {
            animation-delay: 0.1s;
        }
        
        .security-features .security-item:nth-child(3) {
            animation-delay: 0.2s;
        }
        
        .security-features .security-item:nth-child(4) {
            animation-delay: 0.3s;
        }
        
        .security-features .security-item:nth-child(5) {
            animation-delay: 0.4s;
        }

        .security-item:hover {
            transform: translateX(10px);
            color: #28a745;
        }

        .security-item::before {
            content: "✓";
            color: #28a745;
            font-weight: bold;
            margin-right: 15px;
            font-size: 18px;
            text-shadow: var(--shadow-glow) rgba(40, 167, 69, 0.5);
        }

        /* —— NOTIFICATION SYSTEM —— */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 350px;
            animation: neonPulse 2s infinite;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--error-color), #c82333);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .notification.info {
            background: linear-gradient(135deg, var(--primary-blue), #1e7e34);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        /* —— LOADING SYSTEM —— */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 119, 0, 0.3);
            border-top: 5px solid var(--primary-orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: var(--primary-orange);
            margin-top: 20px;
            font-size: 18px;
            text-align: center;
            animation: luminousGlow 2s infinite;
        }

        /* Update notification - REDESIGNED */
        .update-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .update-container {
            background: var(--bg-section);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            max-width: 450px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--primary-orange);
            animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), neonPulse 3s infinite;
            position: relative;
            overflow: hidden;
        }
        
        .update-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(255, 119, 0, 0.2), transparent 70%);
            z-index: -1;
            animation: cosmicBackground 15s linear infinite;
        }

        .update-title {
            color: var(--primary-orange);
            font-size: 24px;
            margin-bottom: 15px;
            text-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.5);
            animation: luminousGlow 2s infinite;
        }

        .update-text {
            margin-bottom: 25px;
            color: white;
            line-height: 1.5;
        }

        .update-btn {
            background: linear-gradient(135deg, var(--primary-orange), #ff9900);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .update-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .update-btn:hover::before {
            left: 100%;
        }

        .update-btn:hover {
            background: linear-gradient(135deg, #ff9900, #ffaa00);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 119, 0, 0.4);
        }

        /* Settings tabs */
        .settings-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .setting-tab {
            background: rgba(52, 152, 219, 0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .setting-tab:hover {
            background: rgba(52, 152, 219, 0.4);
            transform: translateY(-2px);
        }
        
        .setting-tab.active {
            background: linear-gradient(135deg, var(--primary-blue), #2980b9);
            box-shadow: var(--shadow-glow) rgba(52, 152, 219, 0.3);
        }
        
        /* Accessibility options */
        .accessibility-option {
            padding: 15px;
            background: rgba(15, 15, 26, 0.4);
            border-radius: 8px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        
        .accessibility-option:hover {
            background: rgba(15, 15, 26, 0.6);
            transform: translateY(-2px);
        }
        
        .font-size-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .font-btn {
            background: rgba(52, 152, 219, 0.2);
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .font-btn:hover {
            background: rgba(52, 152, 219, 0.4);
        }
        
        .font-btn.active {
            background: linear-gradient(135deg, var(--primary-blue), #2980b9);
            box-shadow: var(--shadow-glow) rgba(52, 152, 219, 0.3);
        }

        /* Premium Avatar Notification */
        .premium-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(145deg, rgba(255, 215, 0, 0.95), rgba(255, 165, 0, 0.95));
            color: #333;
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(255, 215, 0, 0.5);
            z-index: 2000;
            text-align: center;
            max-width: 500px;
            animation: premiumPopup 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .premium-notification h3 {
            margin: 0 0 15px 0;
            font-size: 24px;
            color: #333;
        }

        .premium-notification p {
            margin: 0 0 20px 0;
            line-height: 1.5;
        }

        .premium-notification .close-btn {
            background: #333;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .premium-notification .close-btn:hover {
            background: #555;
            transform: scale(1.05);
        }

        /* Form input styles */
        .form-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(15, 15, 26, 0.8);
            border: 2px solid rgba(107, 70, 193, 0.3);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
        }

        .form-input:focus {
            border-color: var(--primary-orange);
            box-shadow: var(--shadow-glow) rgba(255, 119, 0, 0.3);
            transform: translateY(-2px);
        }

        /* Auth button styles */
        .auth-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary-orange), #ff9900);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .auth-btn:hover {
            background: linear-gradient(135deg, #ff9900, #ffaa00);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 119, 0, 0.3);
        }

        /* —— RESPONSIVE DESIGN —— */
        @media (max-width: 768px) {
            .user-panel, .help-dropdown, .language-dropdown {
                position: relative;
                top: auto;
                left: auto;
                right: auto;
                display: inline-block;
                margin: 10px;
            }

            h1 {
                font-size: 2.5rem;
            }

            .chatbot-container {
                width: 340px;
                height: 600px;
                right: -10px;
            }

            .modal-content, .auth-content, .settings-content {
                margin: 20px;
                padding: 30px;
            }

            .download-container {
                flex-direction: column;
                align-items: stretch;
            }

            .btn {
                text-align: center;
                margin: 10px 0;
            }

            .auth-content, .settings-content {
                max-width: 90%;
                padding: 30px 20px;
            }

            .avatar-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Ukrywanie elementów dla różnych języków */
        html[lang="pl"] .lang-en {
            display: none;
        }
        
        html[lang="en"] .lang-pl {
            display: none;
        }

        /* User status indicator */
        .user-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success-color);
            margin-left: 8px;
            animation: pulse 2s infinite;
        }

        .user-status.offline {
            background: var(--error-color);
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.3);
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
        }

        input:checked + .slider {
            background-color: var(--primary-blue);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }
    </style>
    <script>
        // Version control
        const APP_VERSION = '2.1.0';
        const LAST_VERSION_KEY = 'last_version_seen';

        // Premium avatar names as constant
        const premiumAvatarNames = [
            '⚔️ Cyber Warrior',
            '🐉 Dragon Master',
            '🚀 Space Commander',
            '🧙 Mystic Wizard',
            '🥷 Shadow Ninja'
        ];

        // —— NEW CLOUD DATABASE SYSTEM WITH GOOGLE AUTH —— 
        class GameDatabase {
            constructor() {
                this.users = new Map();
                this.currentUser = null;
                this.isGoogleUser = false;
                this.loadFromStorage();
            }

            async initializeGoogleSignIn() {
                // TWÓJ GOOGLE CLIENT ID
                const GOOGLE_CLIENT_ID = '139779237819-u0v0k1s72a83dmcv7lh9oce9r8d9vaqk.apps.googleusercontent.com';
                
                if (window.google) {
                    try {
                        google.accounts.id.initialize({
                            client_id: GOOGLE_CLIENT_ID,
                            callback: this.handleGoogleSignIn.bind(this),
                            auto_select: false,
                            cancel_on_tap_outside: true
                        });
                        
                        // Render Google Sign-In button
                        google.accounts.id.renderButton(
                            document.getElementById("googleSignInDiv"),
                            { 
                                theme: "filled_blue",
                                size: "large",
                                width: "300",
                                text: "signin_with",
                                shape: "rectangular",
                                logo_alignment: "left"
                            }
                        );
                    } catch (error) {
                        console.error("Google Sign-In initialization error:", error);
                    }
                }
            }

            handleGoogleSignIn(response) {
                // Decode JWT token to get user info
                const userInfo = this.parseJwt(response.credential);
                
                const googleUser = {
                    id: userInfo.sub,
                    username: userInfo.name,
                    email: userInfo.email,
                    avatar: userInfo.picture,
                    isGoogleUser: true,
                    registrationDate: new Date().toISOString(),
                    lastLogin: new Date().toISOString(),
                    downloadedGames: [],
                    premiumAvatarsUnlocked: false,
                    status: 'active',
                    preferences: {
                        theme: 'orange',
                        notifications: true,
                        highContrast: false,
                        fontSize: 'medium',
                        autoSave: true
                    }
                };

                // Check if user exists and preserve their progress
                const existingUser = this.users.get(googleUser.id);
                if (existingUser) {
                    googleUser.downloadedGames = existingUser.downloadedGames || [];
                    googleUser.premiumAvatarsUnlocked = existingUser.premiumAvatarsUnlocked || false;
                    googleUser.preferences = existingUser.preferences || googleUser.preferences;
                }

                // Save or update user
                this.saveGoogleUser(googleUser);
                this.currentUser = googleUser;
                this.isGoogleUser = true;
                
                // Update UI
                updateUserInterface();
                closeAuthModal();
                showNotification(
                    `Witaj ${googleUser.username}! Zalogowano przez Google.`,
                    `Welcome ${googleUser.username}! Logged in with Google.`,
                    'success'
                );
            }

            parseJwt(token) {
                const base64Url = token.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join(''));
                return JSON.parse(jsonPayload);
            }

            saveGoogleUser(user) {
                this.users.set(user.id, user);
                this.saveToStorage();
            }

            loadFromStorage() {
                try {
                    const usersJson = localStorage.getItem('gameDB_users_v3');
                    if (usersJson) {
                        const usersArray = JSON.parse(usersJson);
                        usersArray.forEach(user => {
                            this.users.set(user.id, user);
                        });
                    }
                } catch (error) {
                    console.error("Error loading from localStorage:", error);
                }
            }

            saveToStorage() {
                try {
                    const usersArray = Array.from(this.users.values());
                    localStorage.setItem('gameDB_users_v3', JSON.stringify(usersArray));
                } catch (error) {
                    console.error("Error saving to localStorage:", error);
                }
            }

            trackGameDownload(gameType) {
                if (!this.currentUser) return;
                
                if (!this.currentUser.downloadedGames) {
                    this.currentUser.downloadedGames = [];
                }
                
                if (!this.currentUser.downloadedGames.includes(gameType)) {
                    this.currentUser.downloadedGames.push(gameType);
                    this.saveToStorage();
                    
                    // Check if user should unlock premium avatars
                    if (this.currentUser.downloadedGames.length >= 2) {
                        this.unlockPremiumAvatars();
                    }
                }
            }

            unlockPremiumAvatars() {
                if (!this.currentUser) return;
                
                this.currentUser.premiumAvatarsUnlocked = true;
                this.saveToStorage();
                
                // Show premium notification
                showPremiumUnlockNotification();
            }

            getUserStats() {
                const stats = {
                    totalUsers: this.users.size,
                    activeUsers: 0,
                    googleUsers: 0,
                    premiumUsers: 0
                };
                
                this.users.forEach(user => {
                    if (user.status === 'active') stats.activeUsers++;
                    if (user.isGoogleUser) stats.googleUsers++;
                    if (user.premiumAvatarsUnlocked) stats.premiumUsers++;
                });
                
                return stats;
            }
        }

        // —— AVATAR SYSTEM WITH PREMIUM AVATARS —— 
        // Standard gaming-themed avatars
        const standardAvatars = [
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Felix',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Garfield',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Leo',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Nala',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Simba',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Milo',
            'https://api.dicebear.com/7.x/avataaars/svg?seed=Sassy'
        ];

        // Premium gaming avatars - ENHANCED AND BEAUTIFUL
        const premiumAvatars = [
            'https://api.dicebear.com/7.x/adventurer-neutral/svg?seed=CyberWarrior&backgroundColor=b6e3f4,c0aede,d1d4f9&eyes=variant01&mouth=variant01&eyebrows=variant01',
            'https://api.dicebear.com/7.x/big-ears-neutral/svg?seed=DragonMaster&backgroundColor=ffd5dc,ffdfbf,d1d4f9&eyes=variant01&mouth=variant01',
            'https://api.dicebear.com/7.x/adventurer/svg?seed=SpaceCommander&backgroundColor=c0aede,d1d4f9,ffd5dc&eyes=variant04&mouth=variant03',
            'https://api.dicebear.com/7.x/pixel-art-neutral/svg?seed=MysticWizard&backgroundColor=b6e3f4,ffdfbf&mood=happy',
            'https://api.dicebear.com/7.x/adventurer-neutral/svg?seed=ShadowNinja&backgroundColor=1a1a1a,2a2a2a,3a3a3a&eyes=variant02&mouth=variant02'
        ];

        // Global variables
        let gameDB = null;
        let currentUser = null;
        let downloadAttempts = 0;
        const maxDownloads = 5;
        const downloadCooldown = 30000;
        let isInitialized = false;
        let wasVisitedBefore = false;
        let selectedAvatar = standardAvatars[0];

        // —— AUTHENTICATION FUNCTIONS —— 
        function initializeSystem() {
            try {
                if (isInitialized && gameDB) {
                    console.log("System already initialized");
                    return true;
                }
                
                wasVisitedBefore = localStorage.getItem('visited_before') === 'true';
                localStorage.setItem('visited_before', 'true');
                
                gameDB = new GameDatabase();
                
                // Initialize Google Sign-In after database is ready
                setTimeout(() => {
                    gameDB.initializeGoogleSignIn();
                }, 100);
                
                checkLoginStatus();
                
                console.log(`System initialized at: ${new Date().toISOString()}`);
                console.log(`Database contains ${gameDB.users.size} users`);
                console.log(`Current user: ${currentUser?.username || 'Not logged in'}`);
                
                // Check for app updates - only for returning users
                checkForUpdates();
                isInitialized = true;
                
                // Initialize avatar grid
                initializeAvatarGrid();
                
                // Initialize particles effect
                createParticles();
                
                // Hide the loading spinner after initialization
                hideLoading();
                
                return true;
            } catch (error) {
                console.error("Failed to initialize system:", error);
                showNotification(
                    "Błąd inicjalizacji systemu. Odśwież stronę.",
                    "System initialization error. Refresh the page.",
                    "error"
                );
                hideLoading();
                return false;
            }
        }

        // Create floating particles effect
        function createParticles() {
            const existingContainer = document.querySelector('.particles-container');
            if (existingContainer) return; // Prevent duplicates
            
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'particles-container';
            document.body.appendChild(particlesContainer);
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        // Initialize avatar grid with premium avatars
        function initializeAvatarGrid() {
            try {
                const avatarGrid = document.getElementById('avatarGrid');
                if (avatarGrid) {
                    avatarGrid.innerHTML = ''; // Clear first to prevent duplicates
                    
                    // Add standard avatars
                    standardAvatars.forEach((avatar, index) => {
                        const avatarDiv = document.createElement('div');
                        avatarDiv.className = 'avatar-option';
                        if (index === 0) avatarDiv.classList.add('selected');
                        
                        avatarDiv.innerHTML = `<img src="${avatar}" alt="Gaming Avatar ${index + 1}" onerror="this.src='https://api.dicebear.com/7.x/avataaars/svg?seed=default'">`;
                        avatarDiv.onclick = function() { selectAvatar(avatar, this); };
                        avatarGrid.appendChild(avatarDiv);
                    });
                    
                    // Add premium avatars
                    premiumAvatars.forEach((avatar, index) => {
                        const avatarDiv = document.createElement('div');
                        avatarDiv.className = 'avatar-option premium';
                        
                        const isUnlocked = currentUser?.premiumAvatarsUnlocked || false;
                        if (!isUnlocked) {
                            avatarDiv.classList.add('locked');
                        }
                        
                        avatarDiv.innerHTML = `
                            <img src="${avatar}" alt="${premiumAvatarNames[index]}" onerror="this.src='https://api.dicebear.com/7.x/adventurer/svg?seed=default'">
                            <div class="premium-badge">PREMIUM</div>
                        `;
                        
                        avatarDiv.onclick = function() { 
                            if (isUnlocked) {
                                selectAvatar(avatar, this);
                            } else {
                                showPremiumAvatarInfo();
                            }
                        };
                        avatarGrid.appendChild(avatarDiv);
                    });
                }
                
                // Also initialize settings avatar grid
                const settingsAvatarGrid = document.getElementById('settingsAvatarGrid');
                if (settingsAvatarGrid) {
                    settingsAvatarGrid.innerHTML = '';
                    
                    // Add all avatars to settings
                    [...standardAvatars, ...premiumAvatars].forEach((avatar, index) => {
                        const isPremium = index >= standardAvatars.length;
                        const avatarDiv = document.createElement('div');
                        avatarDiv.className = 'avatar-option';
                        
                        if (isPremium) {
                            avatarDiv.classList.add('premium');
                            if (!currentUser?.premiumAvatarsUnlocked) {
                                avatarDiv.classList.add('locked');
                            }
                        }
                        
                        if (currentUser && currentUser.avatar === avatar) {
                            avatarDiv.classList.add('selected');
                        }
                        
                        avatarDiv.innerHTML = `
                            <img src="${avatar}" alt="${isPremium ? premiumAvatarNames[index - standardAvatars.length] : 'Gaming Avatar ' + (index + 1)}" 
                                 onerror="this.src='https://api.dicebear.com/7.x/avataaars/svg?seed=default'">
                            ${isPremium ? '<div class="premium-badge">PREMIUM</div>' : ''}
                        `;
                        
                        avatarDiv.onclick = function() { 
                            if (!isPremium || currentUser?.premiumAvatarsUnlocked) {
                                updateUserAvatar(avatar, this);
                            } else {
                                showPremiumAvatarInfo();
                            }
                        };
                        settingsAvatarGrid.appendChild(avatarDiv);
                    });
                }
            } catch (error) {
                console.error("Error initializing avatar grid:", error);
            }
        }

        function showPremiumAvatarInfo() {
            const notification = document.createElement('div');
            notification.className = 'premium-notification';
            notification.innerHTML = `
                <h3 class="lang-pl">🔒 Premium Avatary</h3>
                <h3 class="lang-en">🔒 Premium Avatars</h3>
                <p class="lang-pl">
                    Aby odblokować ekskluzywne avatary premium, musisz pobrać obie gry:<br>
                    ✅ Labirynt<br>
                    ✅ Kółko i krzyżyk<br><br>
                    Po pobraniu obu gier automatycznie otrzymasz dostęp do 5 wyjątkowych avatarów!
                </p>
                <p class="lang-en">
                    To unlock exclusive premium avatars, you need to download both games:<br>
                    ✅ Maze<br>
                    ✅ Tic-tac-toe<br><br>
                    After downloading both games, you'll automatically get access to 5 unique avatars!
                </p>
                <button class="close-btn" onclick="this.parentElement.remove()">
                    <span class="lang-pl">Rozumiem</span>
                    <span class="lang-en">Got it</span>
                </button>
            `;
            document.body.appendChild(notification);
        }

        function showPremiumUnlockNotification() {
            const notification = document.createElement('div');
            notification.className = 'premium-notification';
            const avatarList = premiumAvatarNames.join('<br>');
            notification.innerHTML = `
                <h3>🎉 Gratulacje! / Congratulations!</h3>
                <p class="lang-pl">
                    Odblokowałeś Premium Avatary!<br>
                    Możesz teraz korzystać z 5 ekskluzywnych avatarów:<br><br>
                    ${avatarList}
                </p>
                <p class="lang-en">
                    You've unlocked Premium Avatars!<br>
                    You can now use 5 exclusive avatars:<br><br>
                    ${avatarList}
                </p>
                <button class="close-btn" onclick="this.parentElement.remove(); initializeAvatarGrid();">
                    <span class="lang-pl">Świetnie!</span>
                    <span class="lang-en">Awesome!</span>
                </button>
            `;
            document.body.appendChild(notification);
        }

        function checkForUpdates() {
            const lastVersionSeen = localStorage.getItem(LAST_VERSION_KEY) || '1.0.0';
            
            // Only show update notification if:
            // 1. User has visited the site before
            // 2. They are on an older version
            if (wasVisitedBefore && lastVersionSeen !== APP_VERSION) {
                showUpdateNotification();
            } else {
                // Update the stored version without notification for new users
                localStorage.setItem(LAST_VERSION_KEY, APP_VERSION);
            }
        }
        
        function showUpdateNotification() {
            // Use the centered overlay style
            const updateOverlay = document.getElementById('updateOverlay');
            
            if (updateOverlay) {
                const currentLang = document.documentElement.lang;
                const title = document.querySelector('.update-title');
                const text = document.querySelector('.update-text');
                const button = document.querySelector('.update-btn');
                
                if (title) title.textContent = currentLang === 'pl' ? 'Nowa wersja dostępna!' : 'New version available!';
                if (text) text.textContent = currentLang === 'pl' 
                    ? `Dostępna jest nowa wersja (${APP_VERSION}) z ulepszonym logowaniem Google!`
                    : `A new version (${APP_VERSION}) is available with improved Google login!`;
                if (button) button.textContent = currentLang === 'pl' ? 'Odśwież stronę' : 'Refresh page';
                
                updateOverlay.style.display = 'flex';
            }
        }
        
        function updateApp() {
            localStorage.setItem(LAST_VERSION_KEY, APP_VERSION);
            window.location.reload(true);
        }

        function checkLoginStatus() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    const userData = JSON.parse(savedUser);
                    const dbUser = gameDB.users.get(userData.id);
                    if (dbUser && dbUser.status === 'active') {
                        currentUser = dbUser;
                        gameDB.currentUser = dbUser;
                        updateUserInterface();
                    } else {
                        localStorage.removeItem('currentUser');
                    }
                } catch (e) {
                    localStorage.removeItem('currentUser');
                }
            }
        }

        function openAuthModal() {
            if (!isInitialized) {
                if (!initializeSystem()) {
                    showNotification(
                        "Nie można otworzyć logowania. System nie zainicjalizowany.",
                        "Cannot open login. System not initialized.",
                        "error"
                    );
                    return;
                }
            }
            
            const authModal = document.getElementById('authModal');
            if (authModal) {
                authModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                
                // Re-initialize Google Sign-In when modal opens
                if (gameDB) {
                    setTimeout(() => {
                        gameDB.initializeGoogleSignIn();
                    }, 100);
                }
            }
            
            // Make sure avatar grid is initialized
            setTimeout(initializeAvatarGrid, 300);
        }

        function closeAuthModal() {
            const authModal = document.getElementById('authModal');
            if (authModal) {
                authModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function selectAvatar(avatarUrl, element) {
            selectedAvatar = avatarUrl;
            document.querySelectorAll('.avatar-option').forEach(option => option.classList.remove('selected'));
            if (element) {
                element.classList.add('selected');
            } else if (event && event.target) {
                event.target.closest('.avatar-option').classList.add('selected');
            }
        }

        function logout() {
            currentUser = null;
            gameDB.currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserInterface();
            
            // Sign out from Google if it was a Google user
            if (gameDB.isGoogleUser && window.google) {
                google.accounts.id.disableAutoSelect();
            }
            
            showNotification(
                'Pomyślnie wylogowano!',
                'Successfully logged out!',
                'info'
            );
        }

        function updateUserInterface() {
            const loginButton = document.getElementById('loginButton');
            const userInfo = document.getElementById('userInfo');
            
            if (currentUser) {
                if (loginButton) loginButton.style.display = 'none';
                if (userInfo) userInfo.style.display = 'block';
                
                const usernameDisplay = document.getElementById('usernameDisplay');
                if (usernameDisplay) {
                    usernameDisplay.textContent = currentUser.username;
                    
                    // Remove existing premium badge if any
                    const existingBadge = usernameDisplay.parentNode.querySelector('.premium-user-badge');
                    if (existingBadge) existingBadge.remove();
                    
                    // Add premium badge if user has unlocked premium avatars
                    if (currentUser.premiumAvatarsUnlocked) {
                        const premiumBadge = document.createElement('span');
                        premiumBadge.className = 'premium-user-badge';
                        premiumBadge.innerHTML = '👑 Premium';
                        usernameDisplay.parentNode.appendChild(premiumBadge);
                    }
                }
                
                const statusEl = document.getElementById('userStatus');
                if (statusEl) {
                    statusEl.className =  'user-status';
                }
                
                // Update avatar
                const userAvatar = document.querySelector('.user-avatar');
                if (userAvatar && currentUser.avatar) {
                    userAvatar.innerHTML = `<img src="${currentUser.avatar}" alt="Avatar" onerror="this.src='https://api.dicebear.com/7.x/avataaars/svg?seed=default'">`;
                }
                
                // Update settings
                updateSettingsInfo();
                
                // Initialize avatar grid to show premium status
                initializeAvatarGrid();
                
                document.body.classList.add('user-logged-in');
            } else {
                if (loginButton) loginButton.style.display = 'block';
                if (userInfo) userInfo.style.display = 'none';
                document.body.classList.remove('user-logged-in');
            }
        }

        // —— SETTINGS FUNCTIONS —— 
        function openSettings() {
            if (!isInitialized) {
                if (!initializeSystem()) {
                    showNotification(
                        "Nie można otworzyć ustawień. System nie zainicjalizowany.",
                        "Cannot open settings. System not initialized.",
                        "error"
                    );
                    return;
                }
            }
            
            document.getElementById('settingsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            updateSettingsInfo();
            showSettingsTab('profile');
        }
        
        // Show specific settings tab
        function showSettingsTab(tabId) {
            // First hide all sections
            document.querySelectorAll('.setting-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.settings-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Then show the selected one
            const tab = document.getElementById(tabId + 'Tab');
            const section = document.getElementById(tabId + 'Section');
            
            if (tab) tab.classList.add('active');
            if (section) section.style.display = 'block';
        }

        function updateSettingsInfo() {
            if (!currentUser) return;
            
            const usernameEls = document.querySelectorAll('#settingsUsername');
            const regDateEls = document.querySelectorAll('#settingsRegDate');
            const lastLoginEls = document.querySelectorAll('#settingsLastLogin');
            
            usernameEls.forEach(el => {
                if (el) el.textContent = currentUser.username;
            });
            
            regDateEls.forEach(el => {
                if (el) el.textContent = new Date(currentUser.registrationDate).toLocaleDateString();
            });
            
            lastLoginEls.forEach(el => {
                if (el) {
                    el.textContent = currentUser.lastLogin ? 
                        new Date(currentUser.lastLogin).toLocaleDateString() : 
                        (document.documentElement.lang === 'pl' ? 'Pierwsze logowanie' : 'First login');
                }
            });
            
            // Update preferences in UI
            if (currentUser.preferences) {
                // Update font size
                const fontSize = currentUser.preferences.fontSize || 'medium';
                document.querySelectorAll('.font-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                const fontBtn = document.getElementById(`font${fontSize.charAt(0).toUpperCase() + fontSize.slice(1)}`);
                if (fontBtn) fontBtn.classList.add('active');
                
                // Update other toggles
                const toggles = {
                    'notificationsToggle': 'notifications',
                    'highContrastToggle': 'highContrast',
                    'autoSaveToggle': 'autoSave'
                };
                
                Object.entries(toggles).forEach(([elementId, preferenceKey]) => {
                    const toggle = document.getElementById(elementId);
                    if (toggle && currentUser.preferences[preferenceKey] !== undefined) {
                        toggle.checked = currentUser.preferences[preferenceKey];
                    }
                });
            }
            
            // Add premium status if applicable
            if (currentUser.premiumAvatarsUnlocked) {
                const profileSection = document.getElementById('profileSection');
                if (profileSection && !profileSection.querySelector('.premium-status')) {
                    const premiumStatus = document.createElement('div');
                    premiumStatus.className = 'premium-status';
                    premiumStatus.innerHTML = `
                        <div class="premium-user-badge" style="margin: 15px 0;">
                            👑 Status Premium - Masz dostęp do ekskluzywnych avatarów!
                        </div>
                    `;
                    profileSection.insertBefore(premiumStatus, profileSection.querySelector('h4'));
                }
            }
            
            // Refresh avatar grid
            initializeAvatarGrid();
        }

        function closeSettings() {
            document.getElementById('settingsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            hideCaptchaChallenge();
        }

        function changeAvatar() {
            if (!isInitialized || !gameDB) {
                if (!initializeSystem()) {
                    showNotification(
                        "Nie można zmienić avatara. System nie zainicjalizowany.",
                        "Cannot change avatar. System not initialized.",
                        "error"
                    );
                    return;
                }
            }
            
            // Show avatar selection in settings
            const avatarGrid = document.getElementById('settingsAvatarGrid');
            if (!avatarGrid) return;
            
            avatarGrid.style.display = avatarGrid.style.display === 'none' ? 'grid' : 'none';
            
            if (avatarGrid.style.display === 'grid') {
                initializeAvatarGrid();
            }
        }

        function updateUserAvatar(newAvatar, element) {
            if (!currentUser || !gameDB) return;
            
            try {
                currentUser.avatar = newAvatar;
                gameDB.users.set(currentUser.id, currentUser);
                gameDB.saveToStorage();
                updateUserInterface();
                
                // Update selection in settings
                document.querySelectorAll('#settingsAvatarGrid .avatar-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                if (element) {
                    element.classList.add('selected');
                } else if (event && event.target) {
                    event.target.closest('.avatar-option').classList.add('selected');
                }
                
                showNotification(
                    'Avatar został zmieniony!',
                    'Avatar has been changed!',
                    'success'
                );
            } catch (error) {
                showNotification(error.message, error.message, 'error');
            }
        }
        
        // Update user preferences
        function updateUserPreference(key, value) {
            if (!currentUser || !gameDB) return;
            
            try {
                currentUser.preferences[key] = value;
                gameDB.users.set(currentUser.id, currentUser);
                gameDB.saveToStorage();
                updateSettingsInfo();
                
                showNotification(
                    'Ustawienia zostały zaktualizowane!',
                    'Settings have been updated!',
                    'success'
                );
            } catch (error) {
                showNotification(error.message, error.message, 'error');
            }
        }
        
        // Update font size
        function changeFontSize(size) {
            if (!currentUser) return;
            updateUserPreference('fontSize', size);
            
            document.querySelectorAll('.font-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        function showDeleteConfirmation() {
            const captchaEl = document.getElementById('captchaChallenge');
            if (!captchaEl) return;
            
            captchaEl.style.display = 'block';
            
            // Generate CAPTCHA code
            const captchaCode = generateCaptchaCode();
            const codeEl = document.getElementById('captchaCode');
            if (codeEl) codeEl.textContent = captchaCode;
            
            const captchaInput = document.getElementById('captchaInput');
            if (captchaInput) captchaInput.value = '';
        }
        
        function hideCaptchaChallenge() {
            const captchaEl = document.getElementById('captchaChallenge');
            if (captchaEl) captchaEl.style.display = 'none';
        }
        
        function generateCaptchaCode() {
            const chars = '0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars[Math.floor(Math.random() * chars.length)];
            }
            return code;
        }
        
        function confirmDeleteAccount() {
            if (!currentUser || !gameDB) {
                if (!initializeSystem()) {
                    showNotification(
                        "Nie można usunąć konta. System nie zainicjalizowany.",
                        "Cannot delete account. System not initialized.",
                        "error"
                    );
                    return;
                }
            }
            
            const captchaInput = document.getElementById('captchaInput');
            const captchaCode = document.getElementById('captchaCode');
            
            if (!captchaInput || !captchaCode) return;
            
            if (captchaInput.value !== captchaCode.textContent) {
                showNotification(
                    'Nieprawidłowy kod CAPTCHA!',
                    'Invalid CAPTCHA code!',
                    'error'
                );
                return;
            }
            
            try {
                gameDB.users.delete(currentUser.id);
                gameDB.saveToStorage();
                logout();
                closeSettings();
                showNotification(
                    'Konto zostało usunięte.',
                    'Account has been deleted.',
                    'info'
                );
            } catch (error) {
                showNotification(error.message, error.message, 'error');
            }
        }

        // —— DOWNLOAD SYSTEM WITH PREMIUM AVATAR TRACKING —— 
        function checkDownload(event, gameType = 'maze') {
            if (!isInitialized) {
                if (!initializeSystem()) {
                    event.preventDefault();
                    showNotification(
                        'System jest inicjalizowany, spróbuj ponownie za chwilę.',
                        'System is being initialized, try again in a moment.',
                        'info'
                    );
                    return false;
                }
            }

            if (!currentUser) {
                event.preventDefault();
                const currentLang = document.documentElement.lang;
                const message = currentLang === 'pl' ? 
                    'Musisz się zalogować aby pobrać grę!' : 
                    'You must login to download the game!';
                showNotification(message, message, 'error');
                openAuthModal();
                return false;
            }

            if (downloadAttempts >= maxDownloads) {
                event.preventDefault();
                const currentLang = document.documentElement.lang;
                const message = currentLang === 'pl' ? 
                    `Zbyt wiele prób pobierania. Poczekaj ${Math.ceil(downloadCooldown/1000)} sekund.` : 
                    `Too many download attempts. Wait ${Math.ceil(downloadCooldown/1000)} seconds.`;
                showNotification(message, message, 'error');
                return false;
            }

            downloadAttempts++;
            setTimeout(() => {
                downloadAttempts = Math.max(0, downloadAttempts - 1);
            }, downloadCooldown);

            // Track game download for premium avatars
            gameDB.trackGameDownload(gameType);

            const gameName = gameType === 'maze' ? 'Labirynt' : 'Kółko i krzyżyk';
            console.log(`Download initiated for ${gameName} by user: ${currentUser.username} at ${new Date().toISOString()}`);
            
            setTimeout(() => {
                const currentLang = document.documentElement.lang;
                const message = currentLang === 'pl' ? 
                    `Pobieranie gry ${gameName} rozpoczęte! Sprawdź folder Pobrane.` : 
                    `Download of ${gameType === 'maze' ? 'Maze' : 'Tic-tac-toe'} game started! Check your Downloads folder.`;
                showNotification(message, message, 'success');
                
                // Check if user unlocked premium avatars
                if (currentUser.premiumAvatarsUnlocked) {
                    initializeAvatarGrid();
                }
            }, 500);

            return true;
        }

        // —— ENHANCED AI CHATBOT —— 
        function toggleChatbot() {
            if (!isInitialized) {
                if (!initializeSystem()) {
                    showNotification(
                        'System jest inicjalizowany, spróbuj ponownie za chwilę.',
                        'System is being initialized, try again in a moment.',
                        'info'
                    );
                    return;
                }
            }

            if (!currentUser) {
                const currentLang = document.documentElement.lang;
                const message = currentLang === 'pl' ? 
                    'Musisz się zalogować aby korzystać z AI!' : 
                    'You must login to use AI assistant!';
                showNotification(message, message, 'error');
                openAuthModal();
                return;
            }
            
            const container = document.getElementById('chatbotContainer');
            if (!container) return;
            
            const isVisible = container.style.display === 'flex';
            container.style.display = isVisible ? 'none' : 'flex';
            
            const helpDropdown = document.getElementById('helpDropdownContent');
            const helpBtn = document.getElementById('helpDropdownBtn');
            if (helpDropdown) helpDropdown.style.display = 'none';
            if (helpBtn) helpBtn.classList.remove('active');
        }

        function closeChatbot() {
            const container = document.getElementById('chatbotContainer');
            if (container) {
                container.style.display = 'none';
            }
        }

        function clearChatbotResponses() {
            const messagesContainer = document.getElementById('chatbotMessages');
            if (messagesContainer) {
                const responses = messagesContainer.querySelectorAll('.ai-response');
                responses.forEach(response => response.remove());
            }
        }

        // AI responses for different question types
        const aiResponses = {
            // LOGIN & GOOGLE
            'google-signin-help': {
                pl: `<strong>🤖 Jak zalogować się przez Google?</strong><br><br>
                    <strong>To bardzo proste!</strong><br>
                    1. Kliknij przycisk "Zaloguj się przez Google" 🔐<br>
                    2. Wybierz swoje konto Google<br>
                    3. Zaakceptuj uprawnienia<br>
                    4. Gotowe! Jesteś zalogowany 🎉<br><br>
                    
                    <strong>Zalety logowania przez Google:</strong><br>
                    • Nie musisz pamiętać hasła<br>
                    • Bezpieczne i szybkie<br>
                    • Automatyczna synchronizacja<br>
                    • Dostęp z różnych urządzeń<br><br>
                    
                    <em>💡 Wskazówka:</em> Google dba o bezpieczeństwo Twojego konta!`,
                
                en: `<strong>🤖 How to sign in with Google?</strong><br><br>
                    <strong>It's very simple!</strong><br>
                    1. Click "Sign in with Google" button 🔐<br>
                    2. Choose your Google account<br>
                    3. Accept permissions<br>
                    4. Done! You're logged in 🎉<br><br>
                    
                    <strong>Benefits of Google Sign-In:</strong><br>
                    • No need to remember passwords<br>
                    • Secure and fast<br>
                    • Automatic synchronization<br>
                    • Access from multiple devices<br><br>
                    
                    <em>💡 Tip:</em> Google takes care of your account security!`
            },
            
            'premium-avatars': {
                pl: `<strong>🤖 Premium Avatary - Jak je odblokować?</strong><br><br>
                    <strong>🎮 Co to są Premium Avatary?</strong><br>
                    Premium avatary to 5 ekskluzywnych, pięknie zaprojektowanych avatarów:<br>
                    • ⚔️ Cyber Warrior - futurystyczny wojownik<br>
                    • 🐉 Dragon Master - władca smoków<br>
                    • 🚀 Space Commander - dowódca kosmiczny<br>
                    • 🧙 Mystic Wizard - mistyczny czarodziej<br>
                    • 🥷 Shadow Ninja - ninja z cienia<br><br>
                    
                    <strong>🔓 Jak odblokować:</strong><br>
                    1. Pobierz grę Labirynt (pierwsza gra)<br>
                    2. Pobierz grę Kółko i krzyżyk (druga gra)<br>
                    3. Premium avatary zostaną automatycznie odblokowane!<br><br>
                    
                    <strong>✨ Korzyści:</strong><br>
                    • Wyróżnij się wśród innych graczy<br>
                    • Pokaż swoje osiągnięcia<br>
                    • Dostęp do ekskluzywnych avatarów<br>
                    • Status Premium przy nazwie użytkownika`,
                
                en: `<strong>🤖 Premium Avatars - How to unlock them?</strong><br><br>
                    <strong>🎮 What are Premium Avatars?</strong><br>
                    Premium avatars are 5 exclusive, beautifully designed avatars:<br>
                    • ⚔️ Cyber Warrior - futuristic warrior<br>
                    • 🐉 Dragon Master - dragon lord<br>
                    • 🚀 Space Commander - space commander<br>
                    • 🧙 Mystic Wizard - mystical wizard<br>
                    • 🥷 Shadow Ninja - shadow ninja<br><br>
                    
                    <strong>🔓 How to unlock:</strong><br>
                    1. Download the Maze game (first game)<br>
                    2. Download Tic-tac-toe game (second game)<br>
                    3. Premium avatars will be automatically unlocked!<br><br>
                    
                    <strong>✨ Benefits:</strong><br>
                    • Stand out among other players<br>
                    • Show your achievements<br>
                    • Access to exclusive avatars<br>
                    • Premium status next to username`
            },
            
            'google-signin-benefits': {
                pl: `<strong>🤖 Korzyści z logowania przez Google</strong><br><br>
                    <strong>🌐 Główne zalety:</strong><br><br>
                    
                    1. <strong>Bezpieczeństwo</strong><br>
                    Google używa zaawansowanego szyfrowania i dwustopniowej weryfikacji.<br><br>
                    
                    2. <strong>Wygoda</strong><br>
                    Jedno kliknięcie i jesteś zalogowany - bez pamiętania haseł!<br><br>
                    
                    3. <strong>Synchronizacja</strong><br>
                    Twoje postępy i ustawienia są bezpieczne w chmurze Google.<br><br>
                    
                    4. <strong>Multi-device</strong><br>
                    Zaloguj się na telefonie, tablecie i komputerze tym samym kontem.<br><br>
                    
                    5. <strong>Aktualizacje</strong><br>
                    Google automatycznie dba o bezpieczeństwo Twojego konta.`,
                
                en: `<strong>🤖 Benefits of Google Sign-In</strong><br><br>
                    <strong>🌐 Main advantages:</strong><br><br>
                    
                    1. <strong>Security</strong><br>
                    Google uses advanced encryption and two-factor authentication.<br><br>
                    
                    2. <strong>Convenience</strong><br>
                    One click and you're logged in - no password remembering!<br><br>
                    
                    3. <strong>Synchronization</strong><br>
                    Your progress and settings are safe in Google cloud.<br><br>
                    
                    4. <strong>Multi-device</strong><br>
                    Login on phone, tablet and computer with the same account.<br><br>
                    
                    5. <strong>Updates</strong><br>
                    Google automatically takes care of your account security.`
            },
            
            'account-benefits': {
                pl: `<strong>🤖 Korzyści z posiadania konta</strong><br><br>
                    1. <strong>Dostęp do pobierania gier</strong> - tylko zalogowani użytkownicy mogą pobierać<br>
                    2. <strong>Premium Avatary</strong> - odblokuj 5 ekskluzywnych avatarów!<br>
                    3. <strong>Zapisywanie preferencji</strong> - Twoje ustawienia są zawsze zachowane<br>
                    4. <strong>Dostęp do AI asystenta</strong> - korzystaj z mojej pomocy<br>
                    5. <strong>Bezpieczne logowanie przez Google</strong> - wygoda i bezpieczeństwo<br>
                    6. <strong>Synchronizacja</strong> - dostęp z każdego urządzenia<br>
                    7. <strong>Aktualizacje</strong> - bądź na bieżąco z nowościami`,
                
                en: `<strong>🤖 Benefits of having an account</strong><br><br>
                    1. <strong>Access to game downloads</strong> - only logged users can download<br>
                    2. <strong>Premium Avatars</strong> - unlock 5 exclusive avatars!<br>
                    3. <strong>Saving preferences</strong> - your settings are always saved<br>
                    4. <strong>Access to AI assistant</strong> - use my help<br>
                    5. <strong>Secure Google Sign-In</strong> - convenience and security<br>
                    6. <strong>Synchronization</strong> - access from any device<br>
                    7. <strong>Updates</strong> - stay up to date with news`
            },
            
            // DOWNLOAD & TECHNICAL
            'download-not-started': {
                pl: `<strong>🤖 Co zrobić gdy pobieranie się nie zaczęło?</strong><br><br>
                    Jeśli pobieranie nie rozpoczęło się, sprawdź:<br><br>
                    1. <strong>Czy jesteś zalogowany?</strong> - kliknij "Zaloguj się przez Google"<br>
                    2. <strong>Blokady wyskakujących okien</strong> - wyłącz je dla tej strony<br>
                    3. <strong>Limit pobierań</strong> - max 5 prób w 30 sekund<br>
                    4. <strong>Przeglądarka</strong> - użyj Chrome, Firefox lub Edge<br>
                    5. <strong>Pamięć podręczna</strong> - wyczyść i odśwież stronę (Ctrl+F5)<br><br>
                    
                    <em>💡 Pamiętaj:</em> Po pobraniu obu gier odblokowujesz Premium Avatary!`,
                
                en: `<strong>🤖 What to do when download doesn't start?</strong><br><br>
                    If the download hasn't started, check:<br><br>
                    1. <strong>Are you logged in?</strong> - click "Sign in with Google"<br>
                    2. <strong>Popup blockers</strong> - disable them for this site<br>
                    3. <strong>Download limit</strong> - max 5 attempts in 30 seconds<br>
                    4. <strong>Browser</strong> - use Chrome, Firefox or Edge<br>
                    5. <strong>Cache</strong> - clear and refresh page (Ctrl+F5)<br><br>
                    
                    <em>💡 Remember:</em> After downloading both games you unlock Premium Avatars!`
            },
            
            'file-safety': {
                pl: `<strong>🤖 Czy pliki są bezpieczne?</strong><br><br>
                    <strong>✅ TAK, pliki są w 100% bezpieczne!</strong><br><br>
                    
                    <strong>Dlaczego Windows może pokazać ostrzeżenie?</strong><br>
                    Windows Defender ostrzega przed plikami bez podpisu cyfrowego. To normalne dla małych produkcji.<br><br>
                    
                    <strong>Co zrobić przy ostrzeżeniu?</strong><br>
                    1. Kliknij "Więcej informacji"<br>
                    2. Kliknij "Uruchom mimo to"<br>
                    3. Ciesz się grą!<br><br>
                    
                    <strong>🛡️ Nasze zabezpieczenia:</strong><br>
                    • Regularne skanowanie antywirusowe<br>
                    • Bezpieczne serwery Google Cloud<br>
                    • Szyfrowane połączenia HTTPS<br>
                    • Brak złośliwego oprogramowania`,
                
                en: `<strong>🤖 Are the files safe?</strong><br><br>
                    <strong>✅ YES, files are 100% safe!</strong><br><br>
                    
                    <strong>Why might Windows show a warning?</strong><br>
                    Windows Defender warns about files without digital signature. It's normal for small productions.<br><br>
                    
                    <strong>What to do when warning appears?</strong><br>
                    1. Click "More info"<br>
                    2. Click "Run anyway"<br>
                    3. Enjoy the game!<br><br>
                    
                    <strong>🛡️ Our security measures:</strong><br>
                    • Regular antivirus scanning<br>
                    • Secure Google Cloud servers<br>
                    • Encrypted HTTPS connections<br>
                    • No malicious software`
            },
            
            'system-requirements': {
                pl: `<strong>🤖 Wymagania systemowe gier</strong><br><br>
                    <strong>Labirynt - Minimalne wymagania:</strong><br>
                    • System: Windows 7/8/10/11 (64-bit)<br>
                    • Procesor: Intel Core i3 lub AMD równoważny<br>
                    • Pamięć RAM: 4 GB<br>
                    • Karta graficzna: DirectX 11 z 1 GB VRAM<br>
                    • Dysk: 500 MB wolnego miejsca<br><br>
                    
                    <strong>Kółko i krzyżyk - Minimalne wymagania:</strong><br>
                    • System: Windows 7/8/10/11 (32-bit lub 64-bit)<br>
                    • Procesor: Intel Pentium 4 lub lepszy<br>
                    • Pamięć RAM: 2 GB<br>
                    • Karta graficzna: Dowolna z obsługą DirectX 9<br>
                    • Dysk: 100 MB wolnego miejsca<br><br>
                    
                    <em>💡 Pobierz obie gry = Premium Avatary GRATIS!</em>`,
                
                en: `<strong>🤖 Game system requirements</strong><br><br>
                    <strong>Maze - Minimum requirements:</strong><br>
                    • OS: Windows 7/8/10/11 (64-bit)<br>
                    • Processor: Intel Core i3 or AMD equivalent<br>
                    • Memory: 4 GB RAM<br>
                    • Graphics: DirectX 11 with 1 GB VRAM<br>
                    • Storage: 500 MB available space<br><br>
                    
                    <strong>Tic-tac-toe - Minimum requirements:</strong><br>
                    • OS: Windows 7/8/10/11 (32-bit or 64-bit)<br>
                    • Processor: Intel Pentium 4 or better<br>
                    • Memory: 2 GB RAM<br>
                    • Graphics: Any with DirectX 9 support<br>
                    • Storage: 100 MB available space<br><br>
                    
                    <em>💡 Download both games = Premium Avatars FREE!</em>`
            },
            
            'game-features': {
                pl: `<strong>🤖 Funkcje dostępnych gier</strong><br><br>
                    <strong>🎮 Labirynt - fascynująca gra 3D:</strong><br>
                    • Proceduralne labirynty - każda gra inna<br>
                    • 50+ poziomów kampanii<br>
                    • Efekty wizualne i dźwiękowe<br>
                    • System osiągnięć<br>
                    • Tryb czasowy i przetrwania<br>
                    • Różne widoki kamery<br><br>
                    
                    <strong>🎯 Kółko i krzyżyk - klasyka w nowym wydaniu:</strong><br>
                    • AI z 3 poziomami trudności<br>
                    • Tryb dla dwóch graczy<br>
                    • Animowane efekty<br>
                    • Statystyki wygranych<br>
                    • Różne motywy graficzne<br>
                    • Możliwość cofania ruchów<br><br>
                    
                    <strong>🎁 BONUS:</strong> Pobierz obie = 5 Premium Avatarów!`,
                
                en: `<strong>🤖 Available game features</strong><br><br>
                    <strong>🎮 Maze - fascinating 3D game:</strong><br>
                    • Procedural mazes - each game different<br>
                    • 50+ campaign levels<br>
                    • Visual and sound effects<br>
                    • Achievement system<br>
                    • Time and survival modes<br>
                    • Various camera views<br><br>
                    
                    <strong>🎯 Tic-tac-toe - classic in new edition:</strong><br>
                    • AI with 3 difficulty levels<br>
                    • Two-player mode<br>
                    • Animated effects<br>
                    • Win statistics<br>
                    • Various graphic themes<br>
                    • Undo moves option<br><br>
                    
                    <strong>🎁 BONUS:</strong> Download both = 5 Premium Avatars!`
            },
            
            'technical-support': {
                pl: `<strong>🤖 Wsparcie techniczne</strong><br><br>
                    <strong>Problemy z grami? Oto rozwiązania:</strong><br><br>
                    
                    1. <strong>Gra się nie uruchamia</strong><br>
                    • Uruchom jako administrator (PPM → Uruchom jako administrator)<br>
                    • Sprawdź wymagania systemowe<br><br>
                    
                    2. <strong>Błędy graficzne</strong><br>
                    • Zaktualizuj sterowniki karty graficznej<br>
                    • Wyłącz programy w tle<br><br>
                    
                    3. <strong>Problemy z logowaniem</strong><br>
                    • Użyj Google Chrome<br>
                    • Wyczyść ciasteczka<br>
                    • Sprawdź połączenie internetowe<br><br>
                    
                    <strong>💬 Kontakt:</strong> Użyj tego czatu AI do pomocy!`,
                
                en: `<strong>🤖 Technical support</strong><br><br>
                    <strong>Game problems? Here are solutions:</strong><br><br>
                    
                    1. <strong>Game won't start</strong><br>
                    • Run as administrator (RMB → Run as administrator)<br>
                    • Check system requirements<br><br>
                    
                    2. <strong>Graphics errors</strong><br>
                    • Update graphics card drivers<br>
                    • Close background programs<br><br>
                    
                    3. <strong>Login problems</strong><br>
                    • Use Google Chrome<br>
                    • Clear cookies<br>
                    • Check internet connection<br><br>
                    
                    <strong>💬 Contact:</strong> Use this AI chat for help!`
            },
            
            // PRIVACY & SETTINGS
            'privacy-security': {
                pl: `<strong>🤖 Ochrona danych osobowych</strong><br><br>
                    <strong>🔒 Twoje dane są bezpieczne!</strong><br><br>
                    
                    <strong>Co przechowujemy:</strong><br>
                    • Podstawowe informacje z Google (nazwa, email, zdjęcie)<br>
                    • Informacje o pobranych grach<br>
                    • Preferencje użytkownika<br><br>
                    
                    <strong>Czego NIE robimy:</strong><br>
                    • ❌ Nie sprzedajemy danych<br>
                    • ❌ Nie udostępniamy osobom trzecim<br>
                    • ❌ Nie śledzimy aktywności<br>
                    • ❌ Nie wysyłamy spamu<br><br>
                    
                    <strong>Twoje prawa:</strong><br>
                    • Możesz usunąć konto w każdej chwili<br>
                    • Dane są szyfrowane i bezpieczne<br>
                    • Zgodność z RODO`,
                
                en: `<strong>🤖 Personal data protection</strong><br><br>
                    <strong>🔒 Your data is safe!</strong><br><br>
                    
                    <strong>What we store:</strong><br>
                    • Basic Google info (name, email, photo)<br>
                    • Downloaded games information<br>
                    • User preferences<br><br>
                    
                    <strong>What we DON'T do:</strong><br>
                    • ❌ Don't sell data<br>
                    • ❌ Don't share with third parties<br>
                    • ❌ Don't track activity<br>
                    • ❌ Don't send spam<br><br>
                    
                    <strong>Your rights:</strong><br>
                    • You can delete account anytime<br>
                    • Data is encrypted and secure<br>
                    • GDPR compliant`
            },
            
            'settings-help': {
                pl: `<strong>🤖 Pomoc z ustawieniami konta</strong><br><br>
                    <strong>Jak zmienić ustawienia:</strong><br>
                    1. Zaloguj się przez Google<br>
                    2. Kliknij "Ustawienia" w panelu użytkownika<br>
                    3. Wybierz zakładkę:<br><br>
                    
                    <strong>📋 Zakładki:</strong><br>
                    • <strong>Profil</strong> - zmiana avatara (Premium po pobraniu gier!)<br>
                    • <strong>Wygląd</strong> - język i powiadomienia<br>
                    • <strong>Dostępność</strong> - rozmiar czcionki, kontrast<br>
                    • <strong>Zagrożenia</strong> - usuwanie konta<br><br>
                    
                    <strong>💡 Premium funkcje:</strong><br>
                    Pobierz obie gry → Odblokuj 5 Premium Avatarów!`,
                
                en: `<strong>🤖 Help with account settings</strong><br><br>
                    <strong>How to change settings:</strong><br>
                    1. Sign in with Google<br>
                    2. Click "Settings" in user panel<br>
                    3. Choose tab:<br><br>
                    
                    <strong>📋 Tabs:</strong><br>
                    • <strong>Profile</strong> - change avatar (Premium after downloading games!)<br>
                    • <strong>Appearance</strong> - language and notifications<br>
                    • <strong>Accessibility</strong> - font size, contrast<br>
                    • <strong>Danger Zone</strong> - account deletion<br><br>
                    
                    <strong>💡 Premium features:</strong><br>
                    Download both games → Unlock 5 Premium Avatars!`
            },
            
            'avatar-customization': {
                pl: `<strong>🤖 Jak zmienić avatar</strong><br><br>
                    <strong>Zmiana avatara:</strong><br>
                    1. Zaloguj się przez Google<br>
                    2. Przejdź do Ustawień<br>
                    3. W zakładce "Profil" kliknij "Zmień avatar"<br>
                    4. Wybierz jeden z dostępnych<br>
                    5. Gotowe!<br><br>
                    
                    <strong>Dostępne avatary:</strong><br>
                    • 8 standardowych - dostępne od razu<br>
                    • 5 Premium - po pobraniu obu gier!<br><br>
                    
                    <strong>🌟 Premium Avatary:</strong><br>
                    ${premiumAvatarNames.join('<br>')}<br><br>
                    
                    <em>Pobierz Labirynt + Kółko i krzyżyk = Premium!</em>`,
                
                en: `<strong>🤖 How to change avatar</strong><br><br>
                    <strong>Changing avatar:</strong><br>
                    1. Sign in with Google<br>
                    2. Go to Settings<br>
                    3. In "Profile" tab click "Change avatar"<br>
                    4. Choose one available<br>
                    5. Done!<br><br>
                    
                    <strong>Available avatars:</strong><br>
                    • 8 standard - available immediately<br>
                    • 5 Premium - after downloading both games!<br><br>
                    
                    <strong>🌟 Premium Avatars:</strong><br>
                    ${premiumAvatarNames.join('<br>')}<br><br>
                    
                    <em>Download Maze + Tic-tac-toe = Premium!</em>`
            },
            
            'user-stats': {
                pl: function() {
                    let stats;
                    try {
                        stats = gameDB.getUserStats();
                    } catch (e) {
                        return `<strong>🤖 Statystyki niedostępne</strong><br><br>Spróbuj ponownie za chwilę.`;
                    }
                    
                    return `<strong>🤖 Statystyki społeczności</strong><br><br>
                        <strong>📊 Aktualne dane:</strong><br>
                        • Łączna liczba użytkowników: ${stats.totalUsers}<br>
                        • Aktywni użytkownicy: ${stats.activeUsers}<br>
                        • Użytkownicy Google: ${stats.googleUsers}<br>
                        • Użytkownicy Premium: ${stats.premiumUsers}<br><br>
                        
                        <strong>Co to znaczy?</strong><br>
                        Premium = pobrali obie gry i mają ekskluzywne avatary!<br><br>
                        
                        <em>Dołącz do elity - pobierz obie gry!</em>`;
                },
                
                en: function() {
                    let stats;
                    try {
                        stats = gameDB.getUserStats();
                    } catch (e) {
                        return `<strong>🤖 Statistics unavailable</strong><br><br>Try again in a moment.`;
                    }
                    
                    return `<strong>🤖 Community statistics</strong><br><br>
                        <strong>📊 Current data:</strong><br>
                        • Total users: ${stats.totalUsers}<br>
                        • Active users: ${stats.activeUsers}<br>
                        • Google users: ${stats.googleUsers}<br>
                        • Premium users: ${stats.premiumUsers}<br><br>
                        
                        <strong>What does it mean?</strong><br>
                        Premium = downloaded both games and have exclusive avatars!<br><br>
                        
                        <em>Join the elite - download both games!</em>`;
                }
            },
            
            // ADDITIONAL QUESTIONS
            'game-modes': {
                pl: `<strong>🤖 Tryby gry</strong><br><br>
                    <strong>🎮 Labirynt - 5 trybów:</strong><br>
                    1. <strong>Kampania</strong> - 50+ poziomów z rosnącą trudnością<br>
                    2. <strong>Losowy</strong> - nowy labirynt za każdym razem<br>
                    3. <strong>Czasowy</strong> - ukończ przed czasem!<br>
                    4. <strong>Przetrwanie</strong> - jak długo wytrzymasz?<br>
                    5. <strong>Niestandardowy</strong> - twórz własne wyzwania<br><br>
                    
                    <strong>🎯 Kółko i krzyżyk - 4 tryby:</strong><br>
                    1. <strong>VS Komputer</strong> - 3 poziomy AI<br>
                    2. <strong>2 Graczy</strong> - graj ze znajomym<br>
                    3. <strong>Turniej</strong> - seria gier o punkty<br>
                    4. <strong>Trening</strong> - ćwicz strategie<br><br>
                    
                    <em>🎁 Pobierz obie = Premium Avatary!</em>`,
                
                en: `<strong>🤖 Game modes</strong><br><br>
                    <strong>🎮 Maze - 5 modes:</strong><br>
                    1. <strong>Campaign</strong> - 50+ levels with growing difficulty<br>
                    2. <strong>Random</strong> - new maze every time<br>
                    3. <strong>Time</strong> - complete before time!<br>
                    4. <strong>Survival</strong> - how long can you last?<br>
                    5. <strong>Custom</strong> - create your own challenges<br><br>
                    
                    <strong>🎯 Tic-tac-toe - 4 modes:</strong><br>
                    1. <strong>VS Computer</strong> - 3 AI levels<br>
                    2. <strong>2 Players</strong> - play with friend<br>
                    3. <strong>Tournament</strong> - series for points<br>
                    4. <strong>Training</strong> - practice strategies<br><br>
                    
                    <em>🎁 Download both = Premium Avatars!</em>`
            },
            
            'achievements': {
                pl: `<strong>🤖 System osiągnięć</strong><br><br>
                    <strong>🏆 Labirynt - osiągnięcia:</strong><br>
                    • Pierwszy krok - ukończ pierwszy labirynt<br>
                    • Prędkość światła - ukończ w <30 sekund<br>
                    • Maratończyk - 10 labiryntów pod rząd<br>
                    • Odkrywca - odwiedź każdy zakątek<br>
                    • Mistrz - ukończ całą kampanię<br><br>
                    
                    <strong>🏆 Kółko i krzyżyk - osiągnięcia:</strong><br>
                    • Pierwsze zwycięstwo - wygraj pierwszą grę<br>
                    • Seria - 10 wygranych pod rząd<br>
                    • Perfekcjonista - zero remisów<br>
                    • David vs Goliat - pokonaj trudne AI<br>
                    • Legenda - 100 wygranych<br><br>
                    
                    <strong>🌟 MEGA OSIĄGNIĘCIE:</strong><br>
                    Premium Kolekcjoner - pobierz obie gry!`,
                
                en: `<strong>🤖 Achievement system</strong><br><br>
                    <strong>🏆 Maze - achievements:</strong><br>
                    • First Step - complete first maze<br>
                    • Light Speed - complete in <30 seconds<br>
                    • Marathon Runner - 10 mazes in row<br>
                    • Explorer - visit every corner<br>
                    • Master - complete entire campaign<br><br>
                    
                    <strong>🏆 Tic-tac-toe - achievements:</strong><br>
                    • First Victory - win first game<br>
                    • Streak - 10 wins in row<br>
                    • Perfectionist - zero draws<br>
                    • David vs Goliath - beat hard AI<br>
                    • Legend - 100 wins<br><br>
                    
                    <strong>🌟 MEGA ACHIEVEMENT:</strong><br>
                    Premium Collector - download both games!`
            },
            
            'future-updates': {
                pl: `<strong>🤖 Planowane aktualizacje</strong><br><br>
                    <strong>🚀 Co planujemy:</strong><br><br>
                    
                    1. <strong>Więcej Premium Avatarów</strong><br>
                    • 10 nowych ekskluzywnych postaci<br>
                    • Animowane avatary<br><br>
                    
                    2. <strong>Nowe gry</strong><br>
                    • Szachy online<br>
                    • Saper 3D<br>
                    • Snake Multiplayer<br><br>
                    
                    3. <strong>System poziomów</strong><br>
                    • Zdobywaj XP grając<br>
                    • Odblokuj nagrody<br><br>
                    
                    4. <strong>Tryb online</strong><br>
                    • Graj z przyjaciółmi<br>
                    • Globalne rankingi<br><br>
                    
                    <em>Bądź na bieżąco - loguj się przez Google!</em>`,
                
                en: `<strong>🤖 Planned updates</strong><br><br>
                    <strong>🚀 What we're planning:</strong><br><br>
                    
                    1. <strong>More Premium Avatars</strong><br>
                    • 10 new exclusive characters<br>
                    • Animated avatars<br><br>
                    
                    2. <strong>New games</strong><br>
                    • Online Chess<br>
                    • 3D Minesweeper<br>
                    • Snake Multiplayer<br><br>
                    
                    3. <strong>Level system</strong><br>
                    • Earn XP by playing<br>
                    • Unlock rewards<br><br>
                    
                    4. <strong>Online mode</strong><br>
                    • Play with friends<br>
                    • Global rankings<br><br>
                    
                    <em>Stay updated - sign in with Google!</em>`
            }
        };

        function askQuestion(questionType) {
            if (!isInitialized) {
                if (!initializeSystem()) {
                    showNotification(
                        'System jest inicjalizowany, spróbuj ponownie za chwilę.',
                        'System is being initialized, try again in a moment.',
                        'info'
                    );
                    return;
                }
            }

            if (!currentUser) {
                const currentLang = document.documentElement.lang;
                const message = currentLang === 'pl' ? 
                    'Musisz się zalogować aby korzystać z AI!' : 
                    'You must login to use AI assistant!';
                showNotification(message, message, 'error');
                return;
            }
            
            const messagesContainer = document.getElementById('chatbotMessages');
            if (!messagesContainer) return;
            
            const currentLang = document.documentElement.lang;
            
            clearChatbotResponses();
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let response;
                
                // Get appropriate response based on question type
                if (aiResponses[questionType]) {
                    if (typeof aiResponses[questionType] === 'function') {
                        response = aiResponses[questionType]();
                    } else if (aiResponses[questionType][currentLang]) {
                        if (typeof aiResponses[questionType][currentLang] === 'function') {
                            response = aiResponses[questionType][currentLang]();
                        } else {
                            response = aiResponses[questionType][currentLang];
                        }
                    } else {
                        response = currentLang === 'pl' ? 
                            'Przepraszam, odpowiedź na to pytanie nie jest dostępna w wybranym języku.' :
                            'Sorry, the answer to this question is not available in the selected language.';
                    }
                } else {
                    response = currentLang === 'pl' ? 
                        'Przepraszam, nie mam odpowiedzi na to pytanie.' :
                        'Sorry, I don\'t have an answer for this question.';
                }
                
                const responseDiv = document.createElement('div');
                responseDiv.className = 'ai-response';
                responseDiv.innerHTML = response;
                
                messagesContainer.appendChild(responseDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000 + Math.random() * 1000);
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatbotMessages');
            if (!messagesContainer) return;
            
            const currentLang = document.documentElement.lang;
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'ai-typing';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = currentLang === 'pl' ? 
                '🤖 AI analizuje pytanie<span class="typing-dots"></span>' :
                '🤖 AI is analyzing your question<span class="typing-dots"></span>';
            
            messagesContainer.appendChild(typingDiv);
            typingDiv.style.display = 'block';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // —— UTILITY FUNCTIONS —— 
        function showNotification(messagePL, messageEN, type = 'success') {
            const currentLang = document.documentElement.lang;
            const message = currentLang === 'pl' ? messagePL : messageEN;
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }

        function showLoading(text = '') {
            const loading = document.getElementById('loading');
            const loadingText = document.getElementById('loadingText');
            if (loading) {
                loading.style.display = 'flex';
                if (loadingText && text) {
                    loadingText.textContent = text;
                }
            }
        }

        function hideLoading() {
            const loading = document.getElementById('loading');
            if (loading) {
                loading.style.display = 'none';
            }
        }

        // —— MODAL FUNCTIONS —— 
        function openModal() {
            const modal = document.getElementById('infoModal');
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            const modal = document.getElementById('infoModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function openSecurityModal() {
            const modal = document.getElementById('securityModal');
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeSecurityModal() {
            const modal = document.getElementById('securityModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // —— DROPDOWN FUNCTIONS —— 
        function toggleLanguageDropdown() {
            const dropdownContent = document.getElementById('languageDropdownContent');
            const dropdownBtn = document.getElementById('languageDropdownBtn');
            
            if (dropdownContent && dropdownBtn) {
                dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
                dropdownBtn.classList.toggle('active');
            }
        }

        function toggleHelpDropdown() {
            const dropdownContent = document.getElementById('helpDropdownContent');
            const dropdownBtn = document.getElementById('helpDropdownBtn');
            
            if (dropdownContent && dropdownBtn) {
                dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
                dropdownBtn.classList.toggle('active');
            }
        }

        function changeLanguage(lang) {
            if (lang !== 'pl' && lang !== 'en') return;
            
            document.documentElement.lang = lang;
            
            const currentLang = document.getElementById('currentLanguage');
            if (currentLang) {
                currentLang.textContent = lang === 'pl' ? 'Polski' : 'English';
            }
            
            const plOption = document.getElementById('pl-option');
            const enOption = document.getElementById('en-option');
            if (plOption) plOption.classList.toggle('active', lang === 'pl');
            if (enOption) enOption.classList.toggle('active', lang === 'en');
            
            localStorage.setItem('preferredLanguage', lang);
            
            // Close any dropdown that might be open
            const helpDropdown = document.getElementById('helpDropdownContent');
            const languageDropdown = document.getElementById('languageDropdownContent');
            if (helpDropdown) helpDropdown.style.display = 'none';
            if (languageDropdown) languageDropdown.style.display = 'none';
        }

        // —— EVENT LISTENERS —— 
        window.onclick = function(event) {
            const modal = document.getElementById('infoModal');
            const securityModal = document.getElementById('securityModal');
            const authModal = document.getElementById('authModal');
            const settingsModal = document.getElementById('settingsModal');
            const helpDropdown = document.getElementById('helpDropdownContent');
            const languageDropdown = document.getElementById('languageDropdownContent');
            
            if (event.target === modal) {
                closeModal();
            }
            if (event.target === securityModal) {
                closeSecurityModal();
            }
            if (event.target === authModal) {
                closeAuthModal();
            }
            if (event.target === settingsModal) {
                closeSettings();
            }
            
            if (!event.target.closest('.help-dropdown') && helpDropdown) {
                helpDropdown.style.display = 'none';
                const helpBtn = document.getElementById('helpDropdownBtn');
                if (helpBtn) helpBtn.classList.remove('active');
            }
            if (!event.target.closest('.language-dropdown') && languageDropdown) {
                languageDropdown.style.display = 'none';
                const langBtn = document.getElementById('languageDropdownBtn');
                if (langBtn) langBtn.classList.remove('active');
            }
        }

        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 'l') {
                event.preventDefault();
                if (currentUser) {
                    logout();
                } else {
                    openAuthModal();
                }
            }

            if (event.key === 'Escape') {
                closeModal();
                closeSecurityModal();
                closeAuthModal();
                closeSettings();
                closeChatbot();
            }
        });

        // Automatically log out when page is unloaded
        window.addEventListener('beforeunload', function() {
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify({
                    id: currentUser.id,
                    username: currentUser.username,
                    loginTime: new Date().toISOString()
                }));
            }
        });

        // —— INITIALIZATION —— 
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Show loading indicator first
                showLoading('Ładowanie... / Loading...');
                
                // Initialize system after a small delay to show loading
                setTimeout(() => {
                    const initialized = initializeSystem();
                    if (!initialized) {
                        console.error("System initialization failed");
                        showNotification(
                            "Błąd inicjalizacji systemu. Spróbuj odświeżyć stronę.",
                            "System initialization error. Try refreshing the page.",
                            "error"
                        );
                    }
                    
                    const savedLang = localStorage.getItem('preferredLanguage');
                    if (savedLang && (savedLang === 'en' || savedLang === 'pl')) {
                        changeLanguage(savedLang);
                    } else {
                        changeLanguage('pl');
                    }

                    document.body.classList.add('loaded');
                    
                    console.log('Enhanced Google Sign-In system loaded');
                    console.log('Premium avatars system ready');
                    console.log(`Current date and time: ${new Date().toISOString()}`);
                    console.log(`Database contains ${gameDB?.users?.size || 0} users`);
                    console.log(`Current user: ${currentUser?.username || 'Not logged in'}`);
                }, 300);
            } catch (error) {
                console.error("Error during initialization:", error);
                showNotification(
                    "Wystąpił błąd podczas inicjalizacji. Odśwież stronę.",
                    "Error occurred during initialization. Refresh the page.",
                    "error"
                );
                hideLoading();
            }
        });

        // Session management
        setInterval(function() {
            if (currentUser) {
                const lastActivity = localStorage.getItem('userLastActivity');
                if (lastActivity) {
                    const lastActiveTime = new Date(lastActivity);
                    const now = new Date();
                    const inactiveTime = (now - lastActiveTime) / (1000 * 60 * 60); // in hours
                    
                    if (inactiveTime > 24) {
                        logout();
                        const currentLang = document.documentElement.lang;
                        const message = currentLang === 'pl' ? 
                            'Sesja wygasła. Zaloguj się ponownie.' : 
                            'Session expired. Please login again.';
                        showNotification(message, message, 'info');
                    }
                }
                
                // Update last activity
                localStorage.setItem('userLastActivity', new Date().toISOString());
            }
        }, 300000); // Check every 5 minutes
    </script>
</head>
<body>
    <!-- Loading screen -->
    <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <div id="loadingText" class="loading-text">Ładowanie... / Loading...</div>
    </div>

    <!-- Update notification overlay -->
    <div id="updateOverlay" class="update-overlay">
        <div class="update-container">
            <div class="update-title">Nowa wersja dostępna!</div>
            <div class="update-text">Dostępna jest nowa wersja aplikacji. Odśwież stronę, aby korzystać z najnowszych funkcji.</div>
            <button class="update-btn" onclick="updateApp()">Odśwież stronę</button>
        </div>
    </div>

    <!-- User panel with login/register -->
    <div class="user-panel">
        <button id="loginButton" class="login-toggle" onclick="openAuthModal()">
            <span class="lang-pl">🔐 Zaloguj się</span>
            <span class="lang-en">🔐 Login</span>
        </button>
        
        <div id="userInfo" class="user-info" style="display: none;">
            <div class="user-avatar">👤</div>
            <div class="lang-pl">Zalogowany jako:</div>
            <div class="lang-en">Logged in as:</div>
            <strong id="usernameDisplay">User</strong>
            <span id="userStatus" class="user-status"></span>
            <button class="settings-btn" onclick="openSettings()">
                <span class="lang-pl">Ustawienia</span>
                <span class="lang-en">Settings</span>
            </button>
            <button class="logout-btn" onclick="logout()">
                <span class="lang-pl">Wyloguj</span>
                <span class="lang-en">Logout</span>
            </button>
        </div>
    </div>

    <!-- Language dropdown -->
    <div class="language-dropdown">
        <button id="languageDropdownBtn" class="dropdown-btn" onclick="toggleLanguageDropdown()">
            <span id="currentLanguage">Polski</span>
        </button>
        <div id="languageDropdownContent" class="dropdown-content">
            <div id="pl-option" class="dropdown-option active" onclick="changeLanguage('pl')">Polski</div>
            <div id="en-option" class="dropdown-option" onclick="changeLanguage('en')">English</div>
        </div>
    </div>

    <!-- Help dropdown -->
    <div class="help-dropdown">
        <button id="helpDropdownBtn" class="dropdown-btn" onclick="toggleHelpDropdown()">
            <span class="lang-pl">Pomoc</span>
            <span class="lang-en">Help</span>
        </button>
        <div id="helpDropdownContent" class="dropdown-content">
            <div class="dropdown-option lang-pl" onclick="toggleChatbot()">🤖 Asystent AI</div>
            <div class="dropdown-option lang-en" onclick="toggleChatbot()">🤖 AI Assistant</div>
            
            <div class="dropdown-option lang-pl" onclick="openModal()">📥 Jak pobrać grę?</div>
            <div class="dropdown-option lang-en" onclick="openModal()">📥 How to download?</div>
            
            <div class="dropdown-option lang-pl" onclick="openSecurityModal()">🛡️ Bezpieczeństwo</div>
            <div class="dropdown-option lang-en" onclick="openSecurityModal()">🛡️ Security</div>
            
            <div class="dropdown-option lang-pl" onclick="askQuestion('system-requirements'); toggleChatbot();">💻 Wymagania systemowe</div>
            <div class="dropdown-option lang-en" onclick="askQuestion('system-requirements'); toggleChatbot();">💻 System requirements</div>
            
            <div class="dropdown-option lang-pl" onclick="askQuestion('premium-avatars'); toggleChatbot();">👑 Premium Avatary</div>
            <div class="dropdown-option lang-en" onclick="askQuestion('premium-avatars'); toggleChatbot();">👑 Premium Avatars</div>
            
            <div class="dropdown-option lang-pl" onclick="askQuestion('user-stats'); toggleChatbot();">📊 Statystyki użytkowników</div>
            <div class="dropdown-option lang-en" onclick="askQuestion('user-stats'); toggleChatbot();">📊 User statistics</div>
        </div>
    </div>

    <header>
        <h1 class="lang-pl">Gry do pobrania!</h1>
        <h1 class="lang-en">Games to Download!</h1>
    </header>

    <main>
        <!-- Maze game section -->
        <section>
            <h2 class="lang-pl">Labirynt — pobierz teraz</h2>
            <h2 class="lang-en">Maze — download now</h2>
            
            <p class="lang-pl">Odkryj fascynujący labirynt pełen tajemnic i wyzwań. Znajdź drogę wyjścia zanim skończy się czas! <strong>Zaloguj się przez Google aby pobrać.</strong></p>
            <p class="lang-en">Discover a fascinating maze full of mysteries and challenges. Find the way out before time runs out! <strong>Sign in with Google to download.</strong></p>

            <div class="download-container">
                <a href="https://piotr20111.github.io/gryyzzllyy.io/maze_menu.zip" class="btn download-btn lang-pl" download onclick="return checkDownload(event, 'maze')">Pobierz grę</a>
                <a href="https://piotr20111.github.io/gryyzzllyy.io/maze_menu.zip" class="btn download-btn lang-en" download onclick="return checkDownload(event, 'maze')">Download game</a>
                
                <button class="btn info-btn lang-pl" onclick="openModal()">Informacje dotyczące pobrania gry</button>
                <button class="btn info-btn lang-en" onclick="openModal()">Game download information</button>
                
                <p id="download-error" class="error-message lang-pl">Przepraszamy, plik nie jest obecnie dostępny. Prosimy spróbować później.</p>
                <p id="download-error-en" class="error-message lang-en">Sorry, the file is currently unavailable. Please try again later.</p>
            </div>
        </section>

        <!-- Tic-tac-toe game section -->
        <section>
            <h2 class="lang-pl">Kółko i krzyżyk — pobierz teraz</h2>
            <h2 class="lang-en">Tic-tac-toe — download now</h2>
            
            <p class="lang-pl">Klasyczna gra w nowoczesnym wydaniu! Graj przeciwko komputerowi lub znajomym. <strong>Zaloguj się przez Google aby pobrać.</strong></p>
            <p class="lang-en">Classic game in a modern edition! Play against computer or friends. <strong>Sign in with Google to download.</strong></p>

            <div class="download-container">
                <a href="https://piotr20111.github.io/gryyzzllyy.io/kolko.zip" class="btn download-btn lang-pl" download onclick="return checkDownload(event, 'tictactoe')">Pobierz grę</a>
                <a href="https://piotr20111.github.io/gryyzzllyy.io/kolko.zip" class="btn download-btn lang-en" download onclick="return checkDownload(event, 'tictactoe')">Download game</a>
                
                <button class="btn info-btn lang-pl" onclick="askQuestion('game-features'); toggleChatbot();">Informacje o grze</button>
                <button class="btn info-btn lang-en" onclick="askQuestion('game-features'); toggleChatbot();">Game information</button>
                
                <p id="download-error-ttt" class="error-message lang-pl">Przepraszamy, plik nie jest obecnie dostępny. Prosimy spróbować później.</p>
                <p id="download-error-ttt-en" class="error-message lang-en">Sorry, the file is currently unavailable. Please try again later.</p>
            </div>
        </section>
    </main>

    <!-- Authentication Modal with Google Sign-In ONLY -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <span class="close-auth" onclick="closeAuthModal()">&times;</span>
            
            <div class="auth-header">
                <h2 class="lang-pl">Zaloguj się przez Google</h2>
                <h2 class="lang-en">Sign in with Google</h2>
            </div>
            
            <!-- Google Sign-In Button -->
            <div class="google-signin-section">
                <div id="googleSignInDiv"></div>
                
                <div style="margin-top: 20px; text-align: center; color: rgba(255,255,255,0.7);">
                    <p class="lang-pl">
                        Logując się akceptujesz nasze warunki korzystania.<br>
                        Twoje dane są bezpieczne i chronione przez Google.
                    </p>
                    <p class="lang-en">
                        By signing in you accept our terms of use.<br>
                        Your data is safe and protected by Google.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal with enhanced tabs -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-content">
            <span class="close-auth" onclick="closeSettings()">&times;</span>
            <div class="auth-header">
                <h2 class="lang-pl">Ustawienia konta</h2>
                <h2 class="lang-en">Account Settings</h2>
            </div>
            
            <!-- Settings tabs -->
            <div class="settings-tabs">
                <button id="profileTab" class="setting-tab active" onclick="showSettingsTab('profile')">
                    <span class="lang-pl">👤 Profil</span>
                    <span class="lang-en">👤 Profile</span>
                </button>
                <button id="appearanceTab" class="setting-tab" onclick="showSettingsTab('appearance')">
                    <span class="lang-pl">🎨 Wygląd</span>
                    <span class="lang-en">🎨 Appearance</span>
                </button>
                <button id="accessibilityTab" class="setting-tab" onclick="showSettingsTab('accessibility')">
                    <span class="lang-pl">♿ Dostępność</span>
                    <span class="lang-en">♿ Accessibility</span>
                </button>
                <button id="dangerTab" class="setting-tab" onclick="showSettingsTab('danger')">
                    <span class="lang-pl">⚠️ Zagrożenia</span>
                    <span class="lang-en">⚠️ Danger Zone</span>
                </button>
            </div>
            
            <!-- Profile Settings -->
            <div id="profileSection" class="settings-section">
                <h3 class="lang-pl">👤 Profil</h3>
                <h3 class="lang-en">👤 Profile</h3>
                
                <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <div class="lang-pl"><strong>Nazwa użytkownika:</strong> <span id="settingsUsername">-</span></div>
                    <div class="lang-en"><strong>Username:</strong> <span id="settingsUsername">-</span></div>
                    <div class="lang-pl"><strong>Data rejestracji:</strong> <span id="settingsRegDate">-</span></div>
                    <div class="lang-en"><strong>Registration date:</strong> <span id="settingsRegDate">-</span></div>
                    <div class="lang-pl"><strong>Ostatnie logowanie:</strong> <span id="settingsLastLogin">-</span></div>
                    <div class="lang-en"><strong>Last login:</strong> <span id="settingsLastLogin">-</span></div>
                </div>
                
                <h4 class="lang-pl">🎭 Avatar</h4>
                <h4 class="lang-en">🎭 Avatar</h4>
                
                <button class="auth-btn" onclick="changeAvatar()" style="margin-bottom: 15px;">
                    <span class="lang-pl">Zmień avatar</span>
                    <span class="lang-en">Change Avatar</span>
                </button>
                <div id="settingsAvatarGrid" class="avatar-grid" style="display: none;">
                    <!-- Avatar options will be loaded here -->
                </div>
            </div>
            
            <!-- Appearance Settings -->
            <div id="appearanceSection" class="settings-section" style="display: none;">
                <h3 class="lang-pl">🎨 Wygląd</h3>
                <h3 class="lang-en">🎨 Appearance</h3>
                
                <div class="lang-pl">Opcje dotyczące wyglądu interfejsu</div>
                <div class="lang-en">Interface appearance options</div>
                
                <div style="margin-top: 15px;">
                    <div class="lang-pl"><strong>Język:</strong></div>
                    <div class="lang-en"><strong>Language:</strong></div>
                    <div style="margin-top: 10px; display: flex; gap: 10px;">
                        <button class="auth-btn" style="padding: 8px 15px; font-size: 14px;" onclick="changeLanguage('en')">English</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <div class="lang-pl"><strong>Powiadomienia:</strong></div>
                    <div class="lang-en"><strong>Notifications:</strong></div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
                        <div>
                            <div class="lang-pl">Powiadomienia systemowe</div>
                            <div class="lang-en">System notifications</div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="notificationsToggle" checked onchange="updateUserPreference('notifications', this.checked)">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Accessibility Settings -->
            <div id="accessibilitySection" class="settings-section" style="display: none;">
                <h3 class="lang-pl">♿ Dostępność</h3>
                <h3 class="lang-en">♿ Accessibility</h3>
                
                <div class="accessibility-option">
                    <div class="lang-pl"><strong>Wysoki kontrast</strong></div>
                    <div class="lang-en"><strong>High contrast</strong></div>
                    <div style="margin-top: 10px; display: flex; justify-content: space-between; align-items: center;">
                        <div class="lang-pl">Zwiększa kontrast elementów interfejsu</div>
                        <div class="lang-en">Increases interface element contrast</div>
                        <label class="switch">
                            <input type="checkbox" id="highContrastToggle" onchange="updateUserPreference('highContrast', this.checked)">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
                
                <div class="accessibility-option">
                    <div class="lang-pl"><strong>Rozmiar czcionki</strong></div>
                    <div class="lang-en"><strong>Font size</strong></div>
                    <div class="font-size-buttons">
                        <button id="fontSmall" class="font-btn" onclick="changeFontSize('small')">
                            <span class="lang-pl">Mały</span>
                            <span class="lang-en">Small</span>
                        </button>
                        <button id="fontMedium" class="font-btn active" onclick="changeFontSize('medium')">
                            <span class="lang-pl">Średni</span>
                            <span class="lang-en">Medium</span>
                        </button>
                        <button id="fontLarge" class="font-btn" onclick="changeFontSize('large')">
                            <span class="lang-pl">Duży</span>
                            <span class="lang-en">Large</span>
                        </button>
                    </div>
                </div>
                
                <div class="accessibility-option">
                    <div class="lang-pl"><strong>Automatyczny zapis</strong></div>
                    <div class="lang-en"><strong>Auto save</strong></div>
                    <div style="margin-top: 10px; display: flex; justify-content: space-between; align-items: center;">
                        <div class="lang-pl">Automatyczne zapisywanie ustawień</div>
                        <div class="lang-en">Automatic settings saving</div>
                        <label class="switch">
                            <input type="checkbox" id="autoSaveToggle" checked onchange="updateUserPreference('autoSave', this.checked)">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Danger Zone -->
            <div id="dangerSection" class="settings-section danger-zone" style="display: none;">
                <h3 class="lang-pl">⚠️ Strefa zagrożenia</h3>
                <h3 class="lang-en">⚠️ Danger Zone</h3>
                
                <p class="lang-pl">Nieodwracalne operacje na koncie. Używaj z ostrożnością.</p>
                <p class="lang-en">Irreversible account operations. Use with caution.</p>
                
                <button class="delete-account-btn" onclick="showDeleteConfirmation()">
                    <span class="lang-pl">Usuń konto trwale</span>
                    <span class="lang-en">Delete Account Permanently</span>
                </button>
                
                <div style="margin-top: 10px; font-size: 12px; color: rgba(255,255,255,0.6);">
                    <div class="lang-pl">Ta akcja jest nieodwracalna i usunie wszystkie Twoje dane.</div>
                    <div class="lang-en">This action is irreversible and will delete all your data.</div>
                </div>
                
                <!-- Account deletion confirmation with CAPTCHA -->
                <div id="captchaChallenge" class="captcha-challenge">
                    <div class="lang-pl"><strong>Przepisz kod CAPTCHA:</strong></div>
                    <div class="lang-en"><strong>Type the CAPTCHA code:</strong></div>
                    <div class="captcha-code" id="captchaCode">123456</div>
                    <input type="text" id="captchaInput" class="form-input" 
                           placeholder="Kod CAPTCHA / CAPTCHA code" required>
                    
                    <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center;">
                        <button class="auth-btn" style="background: rgba(52, 152, 219, 0.8); padding: 10px 15px; font-size: 14px;" 
                                onclick="hideCaptchaChallenge()">
                            <span class="lang-pl">Anuluj</span>
                            <span class="lang-en">Cancel</span>
                        </button>
                        <button class="delete-account-btn" style="padding: 10px 15px; font-size: 14px;" 
                                onclick="confirmDeleteAccount()">
                            <span class="lang-pl">Potwierdzam usunięcie</span>
                            <span class="lang-en">Confirm Deletion</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced AI Chatbot -->
    <div class="ai-chatbot">
        <button class="chatbot-toggle" onclick="toggleChatbot()" title="Inteligentny asystent AI / Intelligent AI Assistant">
            <span class="robot-icon">🤖</span>
        </button>
        
        <div id="chatbotContainer" class="chatbot-container">
            <div class="chatbot-header">
                <div class="chatbot-title">
                    <span class="robot-icon">🤖</span>
                    <span class="lang-pl">Asystent AI</span>
                    <span class="lang-en">AI Assistant</span>
                </div>
                <button class="chatbot-close" onclick="closeChatbot()">×</button>
            </div>
            
            <div id="chatbotMessages" class="chatbot-messages">
                <div class="chatbot-welcome">
                    <div class="lang-pl">
                        <strong>🤖 Cześć! Jestem AI Asystentem</strong><br>
                        Pomogę Ci z pytaniami dotyczącymi gier, logowania i Premium Avatarów!
                    </div>
                    <div class="lang-en">
                        <strong>🤖 Hi! I'm AI Assistant</strong><br>
                        I'll help you with questions about games, login and Premium Avatars!
                    </div>
                </div>
                
                <div class="chatbot-questions">
                    <!-- GOOGLE LOGIN -->
                    <button class="question-btn lang-pl" onclick="askQuestion('google-signin-help')">
                        🔐 Jak zalogować się przez Google?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('google-signin-help')">
                        🔐 How to sign in with Google?
                    </button>
                    
                    <button class="question-btn lang-pl" onclick="askQuestion('google-signin-benefits')">
                        🌐 Korzyści z logowania przez Google
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('google-signin-benefits')">
                        🌐 Benefits of Google Sign-In
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('premium-avatars')">
                        👑 Premium Avatary - jak odblokować?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('premium-avatars')">
                        👑 Premium Avatars - how to unlock?
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('account-benefits')">
                        ✨ Jakie korzyści daje konto?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('account-benefits')">
                        ✨ What benefits does account provide?
                    </button>

                    <!-- DOWNLOAD & TECHNICAL -->
                    <button class="question-btn lang-pl" onclick="askQuestion('download-not-started')">
                        🔧 Co zrobić gdy pobieranie się nie zaczęło?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('download-not-started')">
                        🔧 What to do when download doesn't start?
                    </button>
                    
                    <button class="question-btn lang-pl" onclick="askQuestion('file-safety')">
                        🛡️ Czy pliki są bezpieczne?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('file-safety')">
                        🛡️ Are the files safe?
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('system-requirements')">
                        💻 Wymagania systemowe gier
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('system-requirements')">
                        💻 Game system requirements
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('game-features')">
                        🎮 Jakie funkcje mają gry?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('game-features')">
                        🎮 What features do games have?
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('technical-support')">
                        🔧 Wsparcie techniczne
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('technical-support')">
                        🔧 Technical support
                    </button>

                    <!-- PRIVACY & SETTINGS -->
                    <button class="question-btn lang-pl" onclick="askQuestion('privacy-security')">
                        🔐 Jak chronicie moje dane?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('privacy-security')">
                        🔐 How do you protect my data?
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('settings-help')">
                        ⚙️ Pomoc z ustawieniami
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('settings-help')">
                        ⚙️ Help with settings
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('avatar-customization')">
                        🎭 Jak zmienić avatar?
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('avatar-customization')">
                        🎭 How to change avatar?
                    </button>

                    <button class="question-btn lang-pl" onclick="askQuestion('user-stats')">
                        📊 Statystyki społeczności
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('user-stats')">
                        📊 Community statistics
                    </button>
                    
                    <!-- ADDITIONAL QUESTIONS -->
                    <button class="question-btn lang-pl" onclick="askQuestion('game-modes')">
                        🎲 Tryby gry
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('game-modes')">
                        🎲 Game modes
                    </button>
                    
                    <button class="question-btn lang-pl" onclick="askQuestion('achievements')">
                        🏆 System osiągnięć
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('achievements')">
                        🏆 Achievement system
                    </button>
                    
                    <button class="question-btn lang-pl" onclick="askQuestion('future-updates')">
                        🚀 Planowane aktualizacje
                    </button>
                    <button class="question-btn lang-en" onclick="askQuestion('future-updates')">
                        🚀 Planned updates
                    </button>
                </div>
            </div>
            
            <div class="chatbot-footer">
                <div class="lang-pl">🤖 AI Asystent - Zawsze gotowy do pomocy</div>
                <div class="lang-en">🤖 AI Assistant - Always ready to help</div>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h3 class="lang-pl">📥 Jak pobrać gry?</h3>
            <h3 class="lang-en">📥 How to download games?</h3>
            
            <div class="lang-pl">
                <ol class="download-steps">
                    <li><span class="step-highlight">Zaloguj się przez Google</span> (wymagane)</li>
                    <li>Kliknij przycisk <span class="step-highlight">"Pobierz grę"</span> przy wybranej grze</li>
                    <li>Plik zostanie pobrany (Labirynt: <span class="step-highlight">maze_menu.zip</span>, Kółko i krzyżyk: <span class="step-highlight">kolko.zip</span>)</li>
                    <li><span class="step-highlight">Rozpakuj</span> plik ZIP do wybranego folderu</li>
                    <li>Uruchom plik <span class="step-highlight">.exe</span> z rozpakowanego folderu</li>
                    <li>Jeśli pojawi się ostrzeżenie Windows, kliknij <span class="step-highlight">"Uruchom mimo to"</span></li>
                    <li><span class="step-highlight">Miłej gry!</span> 🎮</li>
                </ol>
                
                <div class="warning-box">
                    <strong>⚠️ Ostrzeżenie Windows Defender</strong><br>
                    Windows może pokazać ostrzeżenie o nierozpoznanej aplikacji. To normalne dla małych produkcji. 
                    Kliknij "Więcej informacji" → "Uruchom mimo to".
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(255, 215, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 215, 0, 0.3); animation: premiumGlow 2s ease-in-out infinite;">
                    <strong>👑 BONUS! Pobierz obie gry = 5 Premium Avatarów!</strong><br>
                    Po pobraniu Labiryntu i Kółko i krzyżyk otrzymasz dostęp do ekskluzywnych avatarów:<br>
                    ⚔️ Cyber Warrior, 🐉 Dragon Master, 🚀 Space Commander, 🧙 Mystic Wizard, 🥷 Shadow Ninjahttp://127.0.0.1:3000/index.html
                </div>
            </div>
            
            <div class="lang-en">
                <ol class="download-steps">
                    <li><span class="step-highlight">Sign in with Google</span> (required)</li>
                    <li>Click <span class="step-highlight">"Download game"</span> button for chosen game</li>
                    <li>File will be downloaded (Maze: <span class="step-highlight">maze_menu.zip</span>, Tic-tac-toe: <span class="step-highlight">kolko.zip</span>)</li>
                    <li><span class="step-highlight">Extract</span> the ZIP file to chosen folder</li>
                    <li>Run the <span class="step-highlight">.exe</span> file from extracted folder</li>
                    <li>If Windows warning appears, click <span class="step-highlight">"Run anyway"</span></li>
                    <li><span class="step-highlight">Enjoy the game!</span> 🎮</li>
                </ol>
                
                <div class="warning-box">
                    <strong>⚠️ Windows Defender Warning</strong><br>
                    Windows may show a warning about unrecognized app. It's normal for small productions.
                    Click "More info" → "Run anyway".
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(255, 215, 0, 0.1); border-radius: 8px; border: 1px solid rgba(255, 215, 0, 0.3); animation: premiumGlow 2s ease-in-out infinite;">
                    <strong>👑 BONUS! Download both games = 5 Premium Avatars!</strong><br>
                    After downloading Maze and Tic-tac-toe you'll get access to exclusive avatars:<br>
                    ⚔️ Cyber Warrior, 🐉 Dragon Master, 🚀 Space Commander, 🧙 Mystic Wizard, 🥷 Shadow Ninja
                </div>
            </div>
        </div>
    </div>

    <!-- Security Modal -->
    <div id="securityModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeSecurityModal()">&times;</span>
            <h3 class="lang-pl">🛡️ Bezpieczeństwo i prywatność</h3>
            <h3 class="lang-en">🛡️ Security and Privacy</h3>
            
            <div class="security-features">
                <div class="lang-pl">
                    <div class="security-item">Bezpieczne logowanie przez Google OAuth 2.0</div>
                    <div class="security-item">Szyfrowanie danych użytkownika</div>
                    <div class="security-item">Automatyczna synchronizacja w chmurze Google</div>
                    <div class="security-item">Brak przechowywania haseł</div>
                    <div class="security-item">Zgodność z RODO i GDPR</div>
                    <div class="security-item">Minimalne zbieranie danych</div>
                    <div class="security-item">Bezpieczne połączenie HTTPS</div>
                    <div class="security-item">Kontrola dostępu do pobierania</div>
                    <div class="security-item">Automatyczne wylogowanie po 24h</div>
                    <div class="security-item">Możliwość usunięcia konta</div>
                </div>
                <div class="lang-en">
                    <div class="security-item">Secure Google OAuth 2.0 login</div>
                    <div class="security-item">User data encryption</div>
                    <div class="security-item">Automatic Google cloud sync</div>
                    <div class="security-item">No password storage</div>
                    <div class="security-item">GDPR compliant</div>
                    <div class="security-item">Minimal data collection</div>
                    <div class="security-item">Secure HTTPS connection</div>
                    <div class="security-item">Download access control</div>
                    <div class="security-item">Auto logout after 24h</div>
                    <div class="security-item">Account deletion option</div>
                </div>
            </div>
            
            <div class="lang-pl">
                <h4>🔒 Co przechowujemy:</h4>
                <ul>
                    <li>Podstawowe informacje z konta Google (nazwa, email, zdjęcie)</li>
                    <li>Lista pobranych gier</li>
                    <li>Wybrany avatar</li>
                    <li>Preferencje użytkownika</li>
                </ul>
                
                <h4>🗑️ Twoje prawa:</h4>
                <ul>
                    <li>Pełna kontrola nad danymi</li>
                    <li>Możesz usunąć konto w każdej chwili</li>
                    <li>Nie udostępniamy danych osobom trzecim</li>
                    <li>Bezpieczna autoryzacja przez Google</li>
                </ul>
            </div>
            
            <div class="lang-en">
                <h4>🔒 What we store:</h4>
                <ul>
                    <li>Basic Google account info (name, email, photo)</li>
                    <li>List of downloaded games</li>
                    <li>Selected avatar</li>
                    <li>User preferences</li>
                </ul>
                
                <h4>🗑️ Your rights:</h4>
                <ul>
                    <li>Full control over your data</li>
                    <li>You can delete account anytime</li>
                    <li>We don't share data with third parties</li>
                    <li>Secure authorization through Google</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>                       